{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file:///Users/Josip/Documents/dnd-notes-app/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\n\nif (!supabaseUrl || !supabaseAnonKey) {\n  console.error('Missing Supabase environment variables')\n  console.log('URL:', supabaseUrl)\n  console.log('Key:', supabaseAnonKey ? 'Present' : 'Missing')\n}\n\nexport const supabase = createClient(supabaseUrl!, supabaseAnonKey!)"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEN,uCAAsC;;AAItC;AAEO,MAAM,WAAW,CAAA,GAAA,uLAAA,CAAA,eAAY,AAAD,EAAE,aAAc","debugId":null}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file:///Users/Josip/Documents/dnd-notes-app/lib/notes.ts"],"sourcesContent":["// lib/notes.ts - Complete notes operations with image support\n\nimport { supabase } from './supabase'\nimport { Note, NoteWithImages, NoteWithAll, NoteCategory } from './database.types'\n\nexport const createNote = async (noteData: {\n  title: string\n  content: string\n  tags?: string[]\n  category_id?: string | null\n}) => {\n  const { data: { user } } = await supabase.auth.getUser()\n  \n  if (!user) throw new Error('User not authenticated')\n\n  const { data: note, error: noteError } = await supabase\n    .from('notes')\n    .insert([\n      {\n        title: noteData.title,\n        content: noteData.content,\n        tags: noteData.tags || [],\n        category_id: noteData.category_id || null,\n        created_by: user.id\n      }\n    ])\n    .select('*, category:note_categories(*)')\n    .single()\n\n  if (noteError) {\n    console.error('Note creation error:', noteError)\n    throw noteError\n  }\n\n  const { error: permissionError } = await supabase\n    .from('note_permissions')\n    .insert([\n      {\n        note_id: note.id,\n        user_id: user.id,\n        role: 'owner'\n      }\n    ])\n\n  if (permissionError) {\n    console.error('Permission creation error:', permissionError)\n  }\n\n  return note\n}\n\nexport const getNotes = async (): Promise<Note[]> => {\n  const { data, error } = await supabase\n    .from('notes')\n    .select('*, category:note_categories(*)')\n    .order('updated_at', { ascending: false })\n\n  if (error) {\n    console.error('Get notes error:', error)\n    throw error\n  }\n  return data || []\n}\n\n// Get notes with image counts for list view\nexport const getNotesWithImageCounts = async () => {\n  const { data, error } = await supabase\n    .from('notes')\n    .select(`\n      *,\n      category:note_categories(*),\n      image_count:note_images(count)\n    `)\n    .order('updated_at', { ascending: false })\n\n  if (error) {\n    console.error('Get notes with images error:', error)\n    throw error\n  }\n  \n  // Transform the data to include image count as a number\n  const notesWithCounts = data?.map(note => ({\n    ...note,\n    image_count: note.image_count?.[0]?.count || 0\n  })) || []\n  \n  return notesWithCounts\n}\n\n// Get single note with all related data (references + images)\nexport const getNoteWithAll = async (id: string): Promise<NoteWithAll | null> => {\n  const { data, error } = await supabase\n    .from('notes')\n    .select(`\n      *,\n      category:note_categories(*),\n      references_from:note_references!source_note_id (\n        target_note_id,\n        target_note:notes!target_note_id (\n          id,\n          title,\n          category:note_categories(*)\n        )\n      ),\n      references_to:note_references!target_note_id (\n        source_note_id,\n        source_note:notes!source_note_id (\n          id,\n          title,\n          category:note_categories(*)\n        )\n      ),\n      images:note_images (\n        id,\n        image_url,\n        image_name,\n        image_size,\n        image_type,\n        display_order,\n        created_at,\n        uploaded_by\n      )\n    `)\n    .eq('id', id)\n    .single()\n\n  if (error) {\n    console.error('Get note with all data error:', error)\n    throw error\n  }\n  \n  return data\n}\n\n// Get note with just images\nexport const getNoteWithImages = async (id: string): Promise<NoteWithImages | null> => {\n  const { data, error } = await supabase\n    .from('notes')\n    .select(`\n      *,\n      category:note_categories(*),\n      images:note_images (\n        id,\n        image_url,\n        image_name,\n        image_size,\n        image_type,\n        display_order,\n        created_at,\n        uploaded_by\n      )\n    `)\n    .eq('id', id)\n    .single()\n\n  if (error) {\n    console.error('Get note with images error:', error)\n    throw error\n  }\n  \n  return data\n}\n\n// Original getNote function (for backward compatibility)\nexport const getNote = async (id: string) => {\n  const { data, error } = await supabase\n    .from('notes')\n    .select(`\n      *,\n      category:note_categories(*),\n      references_from:note_references!source_note_id (\n        target_note_id,\n        target_note:notes!target_note_id (\n          id,\n          title,\n          category:note_categories(*)\n        )\n      ),\n      references_to:note_references!target_note_id (\n        source_note_id,\n        source_note:notes!source_note_id (\n          id,\n          title,\n          category:note_categories(*)\n        )\n      )\n    `)\n    .eq('id', id)\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport const updateNote = async (id: string, updates: Partial<Note>) => {\n  const { data, error } = await supabase\n    .from('notes')\n    .update({\n      title: updates.title,\n      content: updates.content,\n      tags: updates.tags,\n      category_id: updates.category_id || null,\n      updated_at: new Date().toISOString()\n    })\n    .eq('id', id)\n    .select('*, category:note_categories(*)')\n    .single()\n\n  if (error) {\n    console.error('Update note error:', error)\n    throw error\n  }\n  return data\n}\n\nexport const deleteNote = async (id: string) => {\n  const { error } = await supabase\n    .from('notes')\n    .delete()\n    .eq('id', id)\n\n  if (error) {\n    console.error('Delete note error:', error)\n    throw error\n  }\n}\n\n// Reference functions (existing)\nexport const addNoteReference = async (sourceNoteId: string, targetNoteId: string) => {\n  const { data, error } = await supabase\n    .from('note_references')\n    .insert([\n      {\n        source_note_id: sourceNoteId,\n        target_note_id: targetNoteId\n      }\n    ])\n    .select()\n    .single()\n\n  if (error) {\n    console.error('Add reference error:', error)\n    throw error\n  }\n  return data\n}\n\nexport const removeNoteReference = async (sourceNoteId: string, targetNoteId: string) => {\n  const { error } = await supabase\n    .from('note_references')\n    .delete()\n    .eq('source_note_id', sourceNoteId)\n    .eq('target_note_id', targetNoteId)\n\n  if (error) {\n    console.error('Remove reference error:', error)\n    throw error\n  }\n}\n\nexport const getNotesForReference = async (excludeId?: string) => {\n  let query = supabase\n    .from('notes')\n    .select('id, title, note_type')\n    .order('title')\n\n  if (excludeId) {\n    query = query.neq('id', excludeId)\n  }\n\n  const { data, error } = await query\n\n  if (error) {\n    console.error('Get notes for reference error:', error)\n    throw error\n  }\n  return data || []\n}\n\n// Fetch all categories\nexport const getNoteCategories = async () => {\n  const { data, error } = await supabase\n    .from('note_categories')\n    .select('*')\n    .order('sort_order', { ascending: true })\n  if (error) {\n    console.error('Get categories error:', error)\n    throw error\n  }\n  return data as NoteCategory[] || []\n}\n\n// No category tree logic needed (flat list)\n\nexport const createNoteCategory = async ({ name, icon, color, category_type, sort_order, is_active }: { name: string, icon?: string, color?: string, category_type?: string, sort_order?: number, is_active?: boolean }) => {\n  const { data, error } = await supabase\n    .from('note_categories')\n    .insert([\n      {\n        name,\n        icon: icon || null,\n        color: color || null,\n        category_type: category_type || 'custom',\n        sort_order: sort_order || 0,\n        is_active: is_active ?? true,\n      }\n    ])\n    .select()\n    .single()\n  if (error) {\n    console.error('Create category error:', error)\n    throw error\n  }\n  return data as NoteCategory\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 363, "column": 0}, "map": {"version":3,"sources":["file:///Users/Josip/Documents/dnd-notes-app/lib/search.ts"],"sourcesContent":["import { Note } from './database.types'\n\nexport interface SearchFilters {\n  query: string\n  category: string | 'all'\n  tag: string\n}\n\nexport const searchAndFilterNotes = (\n  notes: Note[],\n  filters: SearchFilters\n): Note[] => {\n  let filteredNotes = [...notes]\n\n  // Text search\n  if (filters.query.trim() !== '') {\n    const query = filters.query.toLowerCase().trim()\n    filteredNotes = filteredNotes.filter(note =>\n      note.title.toLowerCase().includes(query) ||\n      (note.content && note.content.toLowerCase().includes(query)) ||\n      (note.tags && note.tags.some(tag => tag.toLowerCase().includes(query)))\n    )\n  }\n\n  // Category filter\n  if (filters.category !== 'all') {\n    filteredNotes = filteredNotes.filter(note => note.category_id === filters.category)\n  }\n\n  // Tag filter\n  if (filters.tag !== 'all') {\n    filteredNotes = filteredNotes.filter(note =>\n      note.tags && note.tags.includes(filters.tag)\n    )\n  }\n\n  return filteredNotes\n}\n\nexport const getAvailableTags = (notes: Note[]): string[] => {\n  const tagSet = new Set<string>()\n  \n  notes.forEach(note => {\n    if (note.tags) {\n      note.tags.forEach(tag => tagSet.add(tag))\n    }\n  })\n\n  return Array.from(tagSet).sort()\n}"],"names":[],"mappings":";;;;AAQO,MAAM,uBAAuB,CAClC,OACA;IAEA,IAAI,gBAAgB;WAAI;KAAM;IAE9B,cAAc;IACd,IAAI,QAAQ,KAAK,CAAC,IAAI,OAAO,IAAI;QAC/B,MAAM,QAAQ,QAAQ,KAAK,CAAC,WAAW,GAAG,IAAI;QAC9C,gBAAgB,cAAc,MAAM,CAAC,CAAA,OACnC,KAAK,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,UACjC,KAAK,OAAO,IAAI,KAAK,OAAO,CAAC,WAAW,GAAG,QAAQ,CAAC,UACpD,KAAK,IAAI,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC,CAAA,MAAO,IAAI,WAAW,GAAG,QAAQ,CAAC;IAEnE;IAEA,kBAAkB;IAClB,IAAI,QAAQ,QAAQ,KAAK,OAAO;QAC9B,gBAAgB,cAAc,MAAM,CAAC,CAAA,OAAQ,KAAK,WAAW,KAAK,QAAQ,QAAQ;IACpF;IAEA,aAAa;IACb,IAAI,QAAQ,GAAG,KAAK,OAAO;QACzB,gBAAgB,cAAc,MAAM,CAAC,CAAA,OACnC,KAAK,IAAI,IAAI,KAAK,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG;IAE/C;IAEA,OAAO;AACT;AAEO,MAAM,mBAAmB,CAAC;IAC/B,MAAM,SAAS,IAAI;IAEnB,MAAM,OAAO,CAAC,CAAA;QACZ,IAAI,KAAK,IAAI,EAAE;YACb,KAAK,IAAI,CAAC,OAAO,CAAC,CAAA,MAAO,OAAO,GAAG,CAAC;QACtC;IACF;IAEA,OAAO,MAAM,IAAI,CAAC,QAAQ,IAAI;AAChC","debugId":null}},
    {"offset": {"line": 401, "column": 0}, "map": {"version":3,"sources":["file:///Users/Josip/Documents/dnd-notes-app/components/auth/LoginForm.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { supabase } from '@/lib/supabase'\nimport { FcGoogle } from 'react-icons/fc';\nimport { FaDiscord } from 'react-icons/fa';\n\nexport default function LoginForm() {\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [isLoading, setIsLoading] = useState(false)\n  const [isSignUp, setIsSignUp] = useState(false)\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setIsLoading(true)\n\n    try {\n      if (isSignUp) {\n        const { error } = await supabase.auth.signUp({\n          email,\n          password,\n        })\n        if (error) throw error\n        alert('Check your email for confirmation!')\n      } else {\n        const { error } = await supabase.auth.signInWithPassword({\n          email,\n          password,\n        })\n        if (error) throw error\n      }\n    } catch (error: unknown) {\n      if (error instanceof Error) {\n        alert(error.message)\n      } else {\n        alert('An unexpected error occurred.')\n        console.error('Unexpected error:', error);\n      }\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 py-0\">\n      <div className=\"w-full max-w-md p-8 bg-slate-800/90 rounded-xl shadow-2xl border border-slate-700\">\n        <h2 className=\"text-2xl font-bold mb-6 text-center text-white\">\n          {isSignUp ? 'Sign Up' : 'Login'} to Arcane archives\n        </h2>\n        \n        <form onSubmit={handleSubmit} className=\"space-y-5\">\n          <div>\n            <label className=\"block text-sm font-medium mb-2 text-slate-300\">Email</label>\n            <input\n              type=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              className=\"w-full p-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\"\n              placeholder=\"Enter your email\"\n              required\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium mb-2 text-slate-300\">Password</label>\n            <input\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              className=\"w-full p-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\"\n              placeholder=\"Enter your password\"\n              required\n            />\n          </div>\n          <button\n            type=\"submit\"\n            disabled={isLoading}\n            className=\"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white p-3 rounded-lg font-medium shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50\"\n          >\n            {isLoading ? 'Loading...' : (isSignUp ? 'Sign Up' : 'Login')}\n          </button>\n        </form>\n        <div className=\"flex flex-col items-center my-8\">\n          <div className=\"flex flex-row gap-6\">\n            <div className=\"flex flex-col items-center\">\n              <button\n                type=\"button\"\n                onClick={async () => {\n                  const { error } = await supabase.auth.signInWithOAuth({ provider: 'google' });\n                  if (error) alert('Google sign-in error: ' + error.message);\n                }}\n                className=\"flex items-center justify-center w-14 h-14 rounded-full bg-slate-700 border border-slate-600 hover:bg-slate-600 transition-colors shadow-lg\"\n                aria-label=\"Sign in with Google\"\n              >\n                <FcGoogle className=\"w-7 h-7\" />\n              </button>\n              <span className=\"mt-2 text-xs text-slate-400\">Sign in with Google</span>\n            </div>\n            <div className=\"flex flex-col items-center\">\n              <button\n                type=\"button\"\n                onClick={async () => {\n                  const { error } = await supabase.auth.signInWithOAuth({ provider: 'discord' });\n                  if (error) alert('Discord sign-in error: ' + error.message);\n                }}\n                className=\"flex items-center justify-center w-14 h-14 rounded-full bg-slate-700 border border-slate-600 hover:bg-slate-600 transition-colors shadow-lg\"\n                aria-label=\"Sign in with Discord\"\n              >\n                <FaDiscord className=\"w-7 h-7 text-indigo-400\" />\n              </button>\n              <span className=\"mt-2 text-xs text-slate-400\">Sign in with Discord</span>\n            </div>\n          </div>\n        </div>\n        <p className=\"mt-4 text-center text-slate-400\">\n          {isSignUp ? 'Already have an account?' : \"Don't have an account?\"}{' '}\n          <button\n            onClick={() => setIsSignUp(!isSignUp)}\n            className=\"text-blue-400 hover:underline\"\n          >\n            {isSignUp ? 'Login' : 'Sign Up'}\n          </button>\n        </p>\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 673, "column": 0}, "map": {"version":3,"sources":["file:///Users/Josip/Documents/dnd-notes-app/lib/noteLinks.ts"],"sourcesContent":["import React from 'react'\nimport { Note } from './database.types'\n\n// Format: [[Note Title]] or [[Note Title|Display Text]]\nconst LINK_REGEX = /\\[\\[([^\\]|]+)(\\|([^\\]]+))?\\]\\]/g\n\nexport interface ParsedLink {\n  fullMatch: string\n  noteTitle: string\n  displayText: string\n  startIndex: number\n  endIndex: number\n}\n\nexport const parseNoteLinks = (content: string): ParsedLink[] => {\n  const links: ParsedLink[] = []\n  let match\n\n  while ((match = LINK_REGEX.exec(content)) !== null) {\n    const fullMatch = match[0]\n    const noteTitle = match[1].trim()\n    const displayText = match[3] ? match[3].trim() : noteTitle\n    \n    links.push({\n      fullMatch,\n      noteTitle,\n      displayText,\n      startIndex: match.index,\n      endIndex: match.index + fullMatch.length\n    })\n  }\n\n  return links\n}\n\nexport const findNoteByTitle = (notes: Note[], title: string): Note | null => {\n  return notes.find(note => \n    note.title.toLowerCase() === title.toLowerCase()\n  ) || null\n}\n\nexport const renderContentWithLinks = (\n  content: string,\n  notes: Note[],\n  onNoteClick: (note: Note) => void\n): React.ReactNode[] => {\n  const links = parseNoteLinks(content)\n  \n  if (links.length === 0) {\n    return [content]\n  }\n\n  const elements: React.ReactNode[] = []\n  let lastIndex = 0\n\n  links.forEach((link, index) => {\n    // Add text before the link\n    if (link.startIndex > lastIndex) {\n      elements.push(\n        React.createElement('span', { key: `text-${index}` }, content.slice(lastIndex, link.startIndex))\n      )\n    }\n\n    // Find the referenced note\n    const referencedNote = findNoteByTitle(notes, link.noteTitle)\n    \n    if (referencedNote) {\n      // Create clickable link\n      elements.push(\n        React.createElement(\n          'button',\n          {\n            key: `link-${index}`,\n            onClick: () => onNoteClick(referencedNote),\n            className: \"text-blue-400 hover:text-blue-300 underline decoration-dotted hover:decoration-solid transition-all duration-200 font-medium\",\n            title: `Go to: ${referencedNote.title} (${referencedNote.note_type})`\n          },\n          link.displayText\n        )\n      )\n    } else {\n      // Show as broken link\n      elements.push(\n        React.createElement(\n          'span',\n          {\n            key: `broken-link-${index}`,\n            className: \"text-red-400 line-through\",\n            title: `Note not found: ${link.noteTitle}`\n          },\n          link.displayText\n        )\n      )\n    }\n\n    lastIndex = link.endIndex\n  })\n\n  // Add remaining text after the last link\n  if (lastIndex < content.length) {\n    elements.push(\n      React.createElement('span', { key: 'text-end' }, content.slice(lastIndex))\n    )\n  }\n\n  return elements\n}\n\nexport const insertLinkAtCursor = (\n  content: string,\n  cursorPosition: number,\n  noteTitle: string,\n  displayText?: string\n): { newContent: string; newCursorPosition: number } => {\n  const linkText = displayText && displayText !== noteTitle \n    ? `[[${noteTitle}|${displayText}]]`\n    : `[[${noteTitle}]]`\n  \n  const newContent = \n    content.slice(0, cursorPosition) + \n    linkText + \n    content.slice(cursorPosition)\n  \n  return {\n    newContent,\n    newCursorPosition: cursorPosition + linkText.length\n  }\n}"],"names":[],"mappings":";;;;;;AAAA;;AAGA,wDAAwD;AACxD,MAAM,aAAa;AAUZ,MAAM,iBAAiB,CAAC;IAC7B,MAAM,QAAsB,EAAE;IAC9B,IAAI;IAEJ,MAAO,CAAC,QAAQ,WAAW,IAAI,CAAC,QAAQ,MAAM,KAAM;QAClD,MAAM,YAAY,KAAK,CAAC,EAAE;QAC1B,MAAM,YAAY,KAAK,CAAC,EAAE,CAAC,IAAI;QAC/B,MAAM,cAAc,KAAK,CAAC,EAAE,GAAG,KAAK,CAAC,EAAE,CAAC,IAAI,KAAK;QAEjD,MAAM,IAAI,CAAC;YACT;YACA;YACA;YACA,YAAY,MAAM,KAAK;YACvB,UAAU,MAAM,KAAK,GAAG,UAAU,MAAM;QAC1C;IACF;IAEA,OAAO;AACT;AAEO,MAAM,kBAAkB,CAAC,OAAe;IAC7C,OAAO,MAAM,IAAI,CAAC,CAAA,OAChB,KAAK,KAAK,CAAC,WAAW,OAAO,MAAM,WAAW,OAC3C;AACP;AAEO,MAAM,yBAAyB,CACpC,SACA,OACA;IAEA,MAAM,QAAQ,eAAe;IAE7B,IAAI,MAAM,MAAM,KAAK,GAAG;QACtB,OAAO;YAAC;SAAQ;IAClB;IAEA,MAAM,WAA8B,EAAE;IACtC,IAAI,YAAY;IAEhB,MAAM,OAAO,CAAC,CAAC,MAAM;QACnB,2BAA2B;QAC3B,IAAI,KAAK,UAAU,GAAG,WAAW;YAC/B,SAAS,IAAI,eACX,qMAAA,CAAA,UAAK,CAAC,aAAa,CAAC,QAAQ;gBAAE,KAAK,CAAC,KAAK,EAAE,OAAO;YAAC,GAAG,QAAQ,KAAK,CAAC,WAAW,KAAK,UAAU;QAElG;QAEA,2BAA2B;QAC3B,MAAM,iBAAiB,gBAAgB,OAAO,KAAK,SAAS;QAE5D,IAAI,gBAAgB;YAClB,wBAAwB;YACxB,SAAS,IAAI,eACX,qMAAA,CAAA,UAAK,CAAC,aAAa,CACjB,UACA;gBACE,KAAK,CAAC,KAAK,EAAE,OAAO;gBACpB,SAAS,IAAM,YAAY;gBAC3B,WAAW;gBACX,OAAO,CAAC,OAAO,EAAE,eAAe,KAAK,CAAC,EAAE,EAAE,eAAe,SAAS,CAAC,CAAC,CAAC;YACvE,GACA,KAAK,WAAW;QAGtB,OAAO;YACL,sBAAsB;YACtB,SAAS,IAAI,eACX,qMAAA,CAAA,UAAK,CAAC,aAAa,CACjB,QACA;gBACE,KAAK,CAAC,YAAY,EAAE,OAAO;gBAC3B,WAAW;gBACX,OAAO,CAAC,gBAAgB,EAAE,KAAK,SAAS,EAAE;YAC5C,GACA,KAAK,WAAW;QAGtB;QAEA,YAAY,KAAK,QAAQ;IAC3B;IAEA,yCAAyC;IACzC,IAAI,YAAY,QAAQ,MAAM,EAAE;QAC9B,SAAS,IAAI,eACX,qMAAA,CAAA,UAAK,CAAC,aAAa,CAAC,QAAQ;YAAE,KAAK;QAAW,GAAG,QAAQ,KAAK,CAAC;IAEnE;IAEA,OAAO;AACT;AAEO,MAAM,qBAAqB,CAChC,SACA,gBACA,WACA;IAEA,MAAM,WAAW,eAAe,gBAAgB,YAC5C,CAAC,EAAE,EAAE,UAAU,CAAC,EAAE,YAAY,EAAE,CAAC,GACjC,CAAC,EAAE,EAAE,UAAU,EAAE,CAAC;IAEtB,MAAM,aACJ,QAAQ,KAAK,CAAC,GAAG,kBACjB,WACA,QAAQ,KAAK,CAAC;IAEhB,OAAO;QACL;QACA,mBAAmB,iBAAiB,SAAS,MAAM;IACrD;AACF","debugId":null}},
    {"offset": {"line": 761, "column": 0}, "map": {"version":3,"sources":["file:///Users/Josip/Documents/dnd-notes-app/components/notes/NoteLinkHelper.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { Note } from '@/lib/database.types'\n\ninterface NoteLinkHelperProps {\n  isOpen: boolean\n  notes: Note[]\n  onInsertLink: (noteTitle: string, displayText?: string) => void\n  onClose: () => void\n}\n\nexport default function NoteLinkHelper({ \n  isOpen, \n  notes, \n  onInsertLink, \n  onClose \n}: NoteLinkHelperProps) {\n  const [searchQuery, setSearchQuery] = useState('')\n  const [displayText, setDisplayText] = useState('')\n  const [selectedNote, setSelectedNote] = useState<Note | null>(null)\n\n  useEffect(() => {\n    if (isOpen) {\n      setSearchQuery('')\n      setDisplayText('')\n      setSelectedNote(null)\n    }\n  }, [isOpen])\n\n  const filteredNotes = notes.filter(note =>\n    note.title.toLowerCase().includes(searchQuery.toLowerCase())\n  )\n\n  const handleInsert = () => {\n    if (selectedNote) {\n      onInsertLink(selectedNote.title, displayText || undefined)\n      onClose()\n    }\n  }\n\n  if (!isOpen) return null\n\n  return (\n    <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-slate-800 rounded-xl border border-slate-700 p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <h3 className=\"text-xl font-bold text-white\">Insert Note Link</h3>\n          <button \n            onClick={onClose}\n            className=\"text-slate-400 hover:text-white transition-colors\"\n          >\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n\n        {/* Search for note */}\n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium mb-2 text-slate-300\">Search Notes</label>\n          <input\n            type=\"text\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            placeholder=\"Search for a note to link...\"\n            className=\"w-full p-3 bg-slate-700/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 text-white placeholder-slate-400\"\n          />\n        </div>\n\n        {/* Note selection */}\n        <div className=\"mb-4 max-h-60 overflow-y-auto\">\n          {filteredNotes.length === 0 ? (\n            <div className=\"text-center py-4 text-slate-400\">\n              {searchQuery ? 'No notes found' : 'Start typing to search notes'}\n            </div>\n          ) : (\n            <div className=\"space-y-2\">\n              {filteredNotes.map((note) => (\n                <button\n                  key={note.id}\n                  onClick={() => setSelectedNote(note)}\n                  className={`w-full p-3 text-left border rounded-lg transition-all duration-200 ${\n                    selectedNote?.id === note.id\n                      ? 'border-blue-500 bg-blue-500/20'\n                      : 'border-slate-600 hover:border-slate-500 hover:bg-slate-700/50'\n                  }`}\n                >\n                  <div className=\"flex items-center space-x-3\">\n                    <span className=\"text-xl\">{note.category?.icon ?? 'ðŸ“˜'}</span>\n                    <div>\n                      <h4 className=\"font-medium text-white\">{note.title}</h4>\n                      <p className=\"text-sm text-slate-400 capitalize\">\n                        <span className=\"inline-flex items-center gap-1\">\n                          <span>{note.category?.icon ?? 'ðŸ“˜'}</span>\n                          <span>{note.category?.name ?? 'General'}</span>\n                        </span>\n                      </p>\n                    </div>\n                  </div>\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Custom display text */}\n        {selectedNote && (\n          <div className=\"mb-6\">\n            <label className=\"block text-sm font-medium mb-2 text-slate-300\">\n              Display Text (optional)\n            </label>\n            <input\n              type=\"text\"\n              value={displayText}\n              onChange={(e) => setDisplayText(e.target.value)}\n              placeholder={selectedNote.title}\n              className=\"w-full p-3 bg-slate-700/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 text-white placeholder-slate-400\"\n            />\n            <p className=\"text-xs text-slate-400 mt-1\">\n              Leave empty to use the note title as display text\n            </p>\n          </div>\n        )}\n\n        {/* Preview */}\n        {selectedNote && (\n          <div className=\"mb-6 p-3 bg-slate-700/30 border border-slate-600 rounded-lg\">\n            <p className=\"text-sm text-slate-300 mb-2\">Preview:</p>\n            <code className=\"text-blue-400\">\n              [[{selectedNote.title}{displayText ? `|${displayText}` : ''}]]\n            </code>\n          </div>\n        )}\n\n        {/* Buttons */}\n        <div className=\"flex space-x-3\">\n          <button\n            onClick={onClose}\n            className=\"flex-1 bg-slate-600 hover:bg-slate-500 text-white p-3 rounded-lg font-medium transition-colors\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={handleInsert}\n            disabled={!selectedNote}\n            className=\"flex-1 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white p-3 rounded-lg font-medium transition-colors\"\n          >\n            Insert Link\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1072, "column": 0}, "map": {"version":3,"sources":["file:///Users/Josip/Documents/dnd-notes-app/lib/images.ts"],"sourcesContent":["// lib/images.ts - Production ready version\n\nimport { supabase } from './supabase'\nimport { NoteImage, ImageUploadResult } from './database.types'\n\n// Constants\nconst STORAGE_BUCKET = 'images'\nconst MAX_FILE_SIZE = 10 * 1024 * 1024 // 10MB\nconst ALLOWED_TYPES = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp', 'image/svg+xml']\n\n// Utility function to format file sizes\nexport const formatFileSize = (bytes: number): string => {\n  if (bytes === 0) return '0 Bytes'\n  \n  const k = 1024\n  const sizes = ['Bytes', 'KB', 'MB', 'GB']\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n  \n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n}\n\n// File validation utility\nexport const validateImageFile = (file: File): { valid: boolean; error?: string } => {\n  if (!ALLOWED_TYPES.includes(file.type)) {\n    return { valid: false, error: 'Invalid file type. Please upload an image.' }\n  }\n\n  if (file.size > MAX_FILE_SIZE) {\n    return { valid: false, error: 'File too large. Maximum size is 10MB.' }\n  }\n\n  return { valid: true }\n}\n\n// Upload image to Supabase Storage and create database record\nexport const uploadNoteImage = async (\n  noteId: string, \n  file: File,\n  onProgress?: (progress: number) => void\n): Promise<ImageUploadResult> => {\n  try {\n    // Validate file\n    const validation = validateImageFile(file)\n    if (!validation.valid) {\n      return { success: false, error: validation.error || 'Invalid file' }\n    }\n\n    // Get current user\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\n    if (authError) {\n      return { success: false, error: `Authentication error: ${authError.message}` }\n    }\n    \n    if (!user) {\n      return { success: false, error: 'User not authenticated' }\n    }\n\n    // Generate unique filename\n    const fileExt = file.name.split('.').pop()?.toLowerCase() || 'jpg'\n    const timestamp = Date.now()\n    const randomId = Math.random().toString(36).substring(2, 15)\n    const fileName = `notes/${noteId}/${timestamp}-${randomId}.${fileExt}`\n\n    // Report initial progress\n    onProgress?.(0)\n\n    // Upload to Supabase Storage\n    const { data: uploadData, error: uploadError } = await supabase.storage\n      .from(STORAGE_BUCKET)\n      .upload(fileName, file, {\n        cacheControl: '3600',\n        upsert: false\n      })\n\n    if (uploadError) {\n      return { success: false, error: `Upload failed: ${uploadError.message}` }\n    }\n\n    onProgress?.(50)\n\n    // Get public URL\n    const { data: urlData } = supabase.storage\n      .from(STORAGE_BUCKET)\n      .getPublicUrl(fileName)\n\n    if (!urlData?.publicUrl) {\n      return { success: false, error: 'Failed to get image URL' }\n    }\n\n    onProgress?.(75)\n\n    // Get next display order\n    const { data: existingImages } = await supabase\n      .from('note_images')\n      .select('display_order')\n      .eq('note_id', noteId)\n      .order('display_order', { ascending: false })\n      .limit(1)\n\n    const displayOrder = existingImages && existingImages.length > 0 ? existingImages[0].display_order + 1 : 0\n\n    // Create database record\n    const { data: imageRecord, error: dbError } = await supabase\n      .from('note_images')\n      .insert({\n        note_id: noteId,\n        image_url: urlData.publicUrl,\n        image_name: file.name,\n        image_size: file.size,\n        image_type: file.type,\n        display_order: displayOrder,\n        uploaded_by: user.id\n      })\n      .select()\n      .single()\n\n    if (dbError) {\n      // Clean up uploaded file if database insert fails\n      try {\n        await supabase.storage.from(STORAGE_BUCKET).remove([fileName])\n      } catch (cleanupError) {\n        // Log cleanup error but don't fail the operation\n        console.warn('Failed to clean up uploaded file:', cleanupError)\n      }\n      return { success: false, error: `Database error: ${dbError.message}` }\n    }\n\n    onProgress?.(100)\n\n    return { \n      success: true, \n      imageId: imageRecord.id,\n      imageUrl: urlData.publicUrl\n    }\n\n  } catch (error) {\n    return { \n      success: false, \n      error: error instanceof Error ? error.message : 'Upload failed' \n    }\n  }\n}\n\n// Get images for a specific note\nexport const getNoteImages = async (noteId: string): Promise<NoteImage[]> => {\n  try {\n    const { data, error } = await supabase\n      .from('note_images')\n      .select('*')\n      .eq('note_id', noteId)\n      .order('display_order', { ascending: true })\n\n    if (error) {\n      throw new Error(`Failed to fetch images: ${error.message}`)\n    }\n\n    return data || []\n  } catch (error) {\n    throw new Error(error instanceof Error ? error.message : 'Failed to fetch images')\n  }\n}\n\n// Delete image from storage and database\nexport const deleteNoteImage = async (imageId: string): Promise<boolean> => {\n  try {\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\n    if (authError || !user) {\n      return false\n    }\n\n    // Get image details first\n    const { data: image, error: fetchError } = await supabase\n      .from('note_images')\n      .select('image_url, uploaded_by')\n      .eq('id', imageId)\n      .single()\n\n    if (fetchError || !image) {\n      return false\n    }\n\n    // Check if user owns this image\n    if (image.uploaded_by !== user.id) {\n      return false\n    }\n\n    // Extract filename from URL for storage deletion\n    const url = new URL(image.image_url)\n    const pathParts = url.pathname.split('/')\n    // Get the path after /storage/v1/object/public/{bucket}/\n    const bucketIndex = pathParts.findIndex(part => part === STORAGE_BUCKET)\n    const fileName = bucketIndex !== -1 && bucketIndex + 1 < pathParts.length \n      ? pathParts.slice(bucketIndex + 1).join('/')\n      : null\n\n    // Delete from database first\n    const { error: dbError } = await supabase\n      .from('note_images')\n      .delete()\n      .eq('id', imageId)\n\n    // Try to delete from storage (even if database deletion fails)\n    if (fileName) {\n      await supabase.storage\n        .from(STORAGE_BUCKET)\n        .remove([fileName])\n    }\n\n    return !dbError\n  } catch (error) {\n    return false\n  }\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1271, "column": 0}, "map": {"version":3,"sources":["file:///Users/Josip/Documents/dnd-notes-app/components/images/ImageUpload.tsx"],"sourcesContent":["// components/images/ImageUpload.tsx - Production ready version\n\n'use client'\n\nimport { useState, useRef, useCallback } from 'react'\nimport { uploadNoteImage, validateImageFile } from '@/lib/images'\n\ninterface ImageUploadProps {\n  noteId: string\n  onImageUploaded: () => void\n  disabled?: boolean\n}\n\nexport default function ImageUpload({ noteId, onImageUploaded, disabled = false }: ImageUploadProps) {\n  const [isDragOver, setIsDragOver] = useState(false)\n  const [isUploading, setIsUploading] = useState(false)\n  const [uploadProgress, setUploadProgress] = useState(0)\n  const [error, setError] = useState<string | null>(null)\n  \n  const fileInputRef = useRef<HTMLInputElement>(null)\n\n  const handleFileUpload = async (files: FileList | null) => {\n    if (!files || files.length === 0) return\n\n    setError(null)\n    setIsUploading(true)\n\n    try {\n      for (const file of Array.from(files)) {\n        const validation = validateImageFile(file)\n        if (!validation.valid) {\n          setError(validation.error || 'Invalid file')\n          continue\n        }\n\n        const result = await uploadNoteImage(noteId, file, (progress) => {\n          setUploadProgress(progress)\n        })\n\n        if (!result.success) {\n          setError(result.error || 'Upload failed')\n        }\n      }\n\n      onImageUploaded()\n    } catch (error) {\n      setError('Upload failed. Please try again.')\n    } finally {\n      setIsUploading(false)\n      setUploadProgress(0)\n    }\n  }\n\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault()\n    e.stopPropagation()\n    if (!disabled) {\n      setIsDragOver(true)\n    }\n  }, [disabled])\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault()\n    e.stopPropagation()\n    setIsDragOver(false)\n  }, [])\n\n  const handleDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault()\n    e.stopPropagation()\n    setIsDragOver(false)\n    \n    if (!disabled) {\n      handleFileUpload(e.dataTransfer.files)\n    }\n  }, [disabled, noteId])\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    handleFileUpload(e.target.files)\n    // Reset input\n    if (fileInputRef.current) {\n      fileInputRef.current.value = ''\n    }\n  }\n\n  const handleClick = () => {\n    if (!disabled && fileInputRef.current) {\n      fileInputRef.current.click()\n    }\n  }\n\n  return (\n    <div className=\"w-full\">\n      {/* Upload Area */}\n      <div\n        onClick={handleClick}\n        onDragOver={handleDragOver}\n        onDragLeave={handleDragLeave}\n        onDrop={handleDrop}\n        className={`\n          relative border-2 border-dashed rounded-lg p-6 text-center cursor-pointer\n          transition-all duration-200 ease-in-out\n          ${isDragOver && !disabled \n            ? 'border-blue-400 bg-blue-500/10' \n            : 'border-gray-600 hover:border-gray-500'\n          }\n          ${disabled ? 'opacity-50 cursor-not-allowed' : ''}\n          ${isUploading ? 'pointer-events-none' : ''}\n        `}\n      >\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          multiple\n          accept=\"image/*\"\n          onChange={handleFileSelect}\n          disabled={disabled || isUploading}\n          className=\"hidden\"\n        />\n\n        {isUploading ? (\n          <div className=\"space-y-3\">\n            <div className=\"w-8 h-8 mx-auto border-2 border-blue-500 border-t-transparent rounded-full animate-spin\" />\n            <div className=\"text-gray-300\">\n              Uploading... {uploadProgress}%\n            </div>\n            {uploadProgress > 0 && (\n              <div className=\"w-full bg-gray-700 rounded-full h-2\">\n                <div \n                  className=\"bg-blue-500 h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${uploadProgress}%` }}\n                />\n              </div>\n            )}\n          </div>\n        ) : (\n          <div className=\"space-y-2\">\n            <div className=\"w-12 h-12 mx-auto text-gray-400\">\n              <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path \n                  strokeLinecap=\"round\" \n                  strokeLinejoin=\"round\" \n                  strokeWidth={2} \n                  d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" \n                />\n              </svg>\n            </div>\n            <div className=\"text-gray-300\">\n              <span className=\"font-medium\">Click to upload</span> or drag and drop\n            </div>\n            <div className=\"text-sm text-gray-500\">\n              PNG, JPG, GIF, WebP up to 10MB\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Error Display */}\n      {error && (\n        <div className=\"mt-3 p-3 bg-red-500/10 border border-red-500/30 rounded-lg\">\n          <p className=\"text-sm text-red-400\">{error}</p>\n        </div>\n      )}\n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1519, "column": 0}, "map": {"version":3,"sources":["file:///Users/Josip/Documents/dnd-notes-app/components/images/ImageGallery.tsx"],"sourcesContent":["// components/images/ImageGallery.tsx - Display and manage note images\n\n'use client'\n\nimport { useState } from 'react'\nimport { NoteImage } from '@/lib/database.types'\nimport { deleteNoteImage, formatFileSize } from '@/lib/images'\n\ninterface ImageGalleryProps {\n  images: NoteImage[]\n  onImageDeleted: () => void\n  canEdit?: boolean\n  compact?: boolean\n}\n\nexport default function ImageGallery({ \n  images, \n  onImageDeleted, \n  canEdit = false,\n  compact = false \n}: ImageGalleryProps) {\n  const [selectedImage, setSelectedImage] = useState<NoteImage | null>(null)\n  const [deletingImageId, setDeletingImageId] = useState<string | null>(null)\n\n  const handleDeleteImage = async (imageId: string) => {\n    if (!canEdit) return\n\n    const confirmed = window.confirm('Are you sure you want to delete this image?')\n    if (!confirmed) return\n\n    setDeletingImageId(imageId)\n    try {\n      const success = await deleteNoteImage(imageId)\n      if (success) {\n        onImageDeleted()\n      } else {\n        alert('Failed to delete image. Please try again.')\n      }\n    } catch (error) {\n      console.error('Delete error:', error)\n      alert('Failed to delete image. Please try again.')\n    } finally {\n      setDeletingImageId(null)\n    }\n  }\n\n  if (images.length === 0) {\n    return null\n  }\n\n  return (\n    <>\n      {/* Image Grid */}\n      <div className={`grid gap-4 ${compact ? 'grid-cols-2 md:grid-cols-4' : 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3'}`}>\n        {images.map((image) => (\n          <div\n            key={image.id}\n            className=\"group relative bg-slate-700/30 border border-slate-600 rounded-lg overflow-hidden hover:border-slate-500 transition-colors\"\n          >\n            {/* Image */}\n            <div \n              className=\"aspect-video w-full cursor-pointer\"\n              onClick={() => setSelectedImage(image)}\n            >\n              <img\n                src={image.image_url}\n                alt={image.image_name}\n                className=\"w-full h-full object-cover hover:scale-105 transition-transform duration-200\"\n                loading=\"lazy\"\n              />\n            </div>\n\n            {/* Image Info */}\n            <div className=\"p-3\">\n              <h4 className=\"text-sm font-medium text-white truncate\" title={image.image_name}>\n                {image.image_name}\n              </h4>\n              <div className=\"flex justify-between items-center mt-1 text-xs text-slate-400\">\n                <span>{image.image_size && formatFileSize(image.image_size)}</span>\n                <span>{new Date(image.created_at).toLocaleDateString()}</span>\n              </div>\n            </div>\n\n            {/* Delete Button */}\n            {canEdit && (\n              <button\n                onClick={() => handleDeleteImage(image.id)}\n                disabled={deletingImageId === image.id}\n                className=\"absolute top-2 right-2 p-1.5 bg-red-600/80 hover:bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200 disabled:opacity-50\"\n                title=\"Delete image\"\n              >\n                {deletingImageId === image.id ? (\n                  <div className=\"w-4 h-4 border border-white border-t-transparent rounded-full animate-spin\" />\n                ) : (\n                  <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                )}\n              </button>\n            )}\n          </div>\n        ))}\n      </div>\n\n      {/* Lightbox Modal */}\n      {selectedImage && (\n        <div \n          className=\"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 p-4\"\n          onClick={() => setSelectedImage(null)}\n        >\n          <div className=\"relative max-w-4xl max-h-full\">\n            {/* Close Button */}\n            <button\n              onClick={() => setSelectedImage(null)}\n              className=\"absolute -top-10 right-0 text-white hover:text-gray-300 transition-colors\"\n            >\n              <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n\n            {/* Image */}\n            <img\n              src={selectedImage.image_url}\n              alt={selectedImage.image_name}\n              className=\"max-w-full max-h-full object-contain rounded-lg\"\n              onClick={(e) => e.stopPropagation()}\n            />\n\n            {/* Image Info */}\n            <div className=\"absolute bottom-0 left-0 right-0 bg-black/80 text-white p-4 rounded-b-lg\">\n              <h3 className=\"font-medium\">{selectedImage.image_name}</h3>\n              <div className=\"flex justify-between items-center mt-1 text-sm text-gray-300\">\n                <span>\n                  {selectedImage.image_size && formatFileSize(selectedImage.image_size)}\n                  {selectedImage.image_type && ` â€¢ ${selectedImage.image_type}`}\n                </span>\n                <span>{new Date(selectedImage.created_at).toLocaleString()}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1783, "column": 0}, "map": {"version":3,"sources":["file:///Users/Josip/Documents/dnd-notes-app/components/notes/RichTextEditor.tsx"],"sourcesContent":["\"use client\"\n\nimport dynamic from \"next/dynamic\";\nimport type { FC } from \"react\";\n\nimport type { RichTextEditorProps } from \"./RichTextEditorClientOnly\";\n\nconst CKEditorNoSSR = dynamic(() => import(\"./RichTextEditorClientOnly\"), { ssr: false });\n\nconst RichTextEditor: FC<RichTextEditorProps> = (props) => <CKEditorNoSSR {...props} />;\n\nexport default RichTextEditor; "],"names":[],"mappings":";;;;AAEA;;AAFA;;;AAOA,MAAM,gBAAgB,CAAA,GAAA,+JAAA,CAAA,UAAO,AAAD;;;;;;IAAgD,KAAK;;AAEjF,MAAM,iBAA0C,CAAC,sBAAU,8OAAC;QAAe,GAAG,KAAK;;;;;;uCAEpE","debugId":null}},
    {"offset": {"line": 1814, "column": 0}, "map": {"version":3,"sources":["file:///Users/Josip/Documents/dnd-notes-app/lib/icons.ts"],"sourcesContent":["import {\n  FiBook,\n  FiFileText,\n  FiPackage,\n  FiCalendar,\n  FiMapPin,\n  FiShield,\n  FiUsers,\n  FiFlag,\n  FiClock,\n  FiFolder,\n  FiBox,\n  FiEdit,\n  FiMap,\n  FiArchive,\n  FiImage,\n  FiStar,\n  FiBookmark,\n  FiGlobe,\n  FiHome,\n  FiList,\n  FiSettings,\n  FiSearch,\n  FiCheckCircle,\n  FiXCircle,\n  FiPlus,\n  FiMinus,\n  FiChevronDown,\n  FiChevronUp,\n  FiChevronLeft,\n  FiChevronRight,\n  FiTrash,\n  FiUser,\n  FiUsers as FiUsersAlt,\n  FiBookOpen,\n  FiMenu,\n} from 'react-icons/fi';\n\nexport const ICON_MAP: Record<string, React.ComponentType> = {\n  book: FiBook,\n  'file-text': FiFileText,\n  package: FiPackage,\n  calendar: FiCalendar,\n  'map-pin': FiMapPin,\n  shield: FiShield,\n  users: FiUsers,\n  flag: FiFlag,\n  clock: FiClock,\n  'book-open': FiBookOpen,\n  folder: FiFolder,\n  box: FiBox,\n  edit: FiEdit,\n  map: FiMap,\n  archive: FiArchive,\n  image: FiImage,\n  star: FiStar,\n  bookmark: FiBookmark,\n  globe: FiGlobe,\n  home: FiHome,\n  list: FiList,\n  settings: FiSettings,\n  search: FiSearch,\n  check: FiCheckCircle,\n  x: FiXCircle,\n  plus: FiPlus,\n  minus: FiMinus,\n  chevronDown: FiChevronDown,\n  chevronUp: FiChevronUp,\n  chevronLeft: FiChevronLeft,\n  chevronRight: FiChevronRight,\n  trash: FiTrash,\n  user: FiUser,\n  usersAlt: FiUsersAlt,\n  fallback: FiFolder,\n  menu: FiMenu,\n};\n\n// For icon picker UI\nexport const ICON_OPTIONS = [\n  { key: 'book', label: 'Book', icon: FiBook },\n  { key: 'file-text', label: 'File Text', icon: FiFileText },\n  { key: 'package', label: 'Package', icon: FiPackage },\n  { key: 'calendar', label: 'Calendar', icon: FiCalendar },\n  { key: 'map-pin', label: 'Map Pin', icon: FiMapPin },\n  { key: 'shield', label: 'Shield', icon: FiShield },\n  { key: 'users', label: 'Users', icon: FiUsers },\n  { key: 'flag', label: 'Flag', icon: FiFlag },\n  { key: 'clock', label: 'Clock', icon: FiClock },\n  { key: 'book-open', label: 'Book Open', icon: FiBookOpen },\n  { key: 'folder', label: 'Folder', icon: FiFolder },\n  { key: 'box', label: 'Box', icon: FiBox },\n  { key: 'edit', label: 'Edit', icon: FiEdit },\n  { key: 'map', label: 'Map', icon: FiMap },\n  { key: 'archive', label: 'Archive', icon: FiArchive },\n  { key: 'image', label: 'Image', icon: FiImage },\n  { key: 'star', label: 'Star', icon: FiStar },\n  { key: 'bookmark', label: 'Bookmark', icon: FiBookmark },\n  { key: 'globe', label: 'Globe', icon: FiGlobe },\n  { key: 'home', label: 'Home', icon: FiHome },\n  { key: 'list', label: 'List', icon: FiList },\n  { key: 'settings', label: 'Settings', icon: FiSettings },\n  { key: 'search', label: 'Search', icon: FiSearch },\n  { key: 'check', label: 'Check', icon: FiCheckCircle },\n  { key: 'x', label: 'X', icon: FiXCircle },\n  { key: 'plus', label: 'Plus', icon: FiPlus },\n  { key: 'minus', label: 'Minus', icon: FiMinus },\n  { key: 'chevronDown', label: 'Chevron Down', icon: FiChevronDown },\n  { key: 'chevronUp', label: 'Chevron Up', icon: FiChevronUp },\n  { key: 'chevronLeft', label: 'Chevron Left', icon: FiChevronLeft },\n  { key: 'chevronRight', label: 'Chevron Right', icon: FiChevronRight },\n  { key: 'trash', label: 'Trash', icon: FiTrash },\n  { key: 'user', label: 'User', icon: FiUser },\n  { key: 'usersAlt', label: 'Users Alt', icon: FiUsersAlt },\n  { key: 'menu', label: 'Menu', icon: FiMenu },\n]; "],"names":[],"mappings":";;;;AAAA;;AAsCO,MAAM,WAAgD;IAC3D,MAAM,8IAAA,CAAA,SAAM;IACZ,aAAa,8IAAA,CAAA,aAAU;IACvB,SAAS,8IAAA,CAAA,YAAS;IAClB,UAAU,8IAAA,CAAA,aAAU;IACpB,WAAW,8IAAA,CAAA,WAAQ;IACnB,QAAQ,8IAAA,CAAA,WAAQ;IAChB,OAAO,8IAAA,CAAA,UAAO;IACd,MAAM,8IAAA,CAAA,SAAM;IACZ,OAAO,8IAAA,CAAA,UAAO;IACd,aAAa,8IAAA,CAAA,aAAU;IACvB,QAAQ,8IAAA,CAAA,WAAQ;IAChB,KAAK,8IAAA,CAAA,QAAK;IACV,MAAM,8IAAA,CAAA,SAAM;IACZ,KAAK,8IAAA,CAAA,QAAK;IACV,SAAS,8IAAA,CAAA,YAAS;IAClB,OAAO,8IAAA,CAAA,UAAO;IACd,MAAM,8IAAA,CAAA,SAAM;IACZ,UAAU,8IAAA,CAAA,aAAU;IACpB,OAAO,8IAAA,CAAA,UAAO;IACd,MAAM,8IAAA,CAAA,SAAM;IACZ,MAAM,8IAAA,CAAA,SAAM;IACZ,UAAU,8IAAA,CAAA,aAAU;IACpB,QAAQ,8IAAA,CAAA,WAAQ;IAChB,OAAO,8IAAA,CAAA,gBAAa;IACpB,GAAG,8IAAA,CAAA,YAAS;IACZ,MAAM,8IAAA,CAAA,SAAM;IACZ,OAAO,8IAAA,CAAA,UAAO;IACd,aAAa,8IAAA,CAAA,gBAAa;IAC1B,WAAW,8IAAA,CAAA,cAAW;IACtB,aAAa,8IAAA,CAAA,gBAAa;IAC1B,cAAc,8IAAA,CAAA,iBAAc;IAC5B,OAAO,8IAAA,CAAA,UAAO;IACd,MAAM,8IAAA,CAAA,SAAM;IACZ,UAAU,8IAAA,CAAA,UAAU;IACpB,UAAU,8IAAA,CAAA,WAAQ;IAClB,MAAM,8IAAA,CAAA,SAAM;AACd;AAGO,MAAM,eAAe;IAC1B;QAAE,KAAK;QAAQ,OAAO;QAAQ,MAAM,8IAAA,CAAA,SAAM;IAAC;IAC3C;QAAE,KAAK;QAAa,OAAO;QAAa,MAAM,8IAAA,CAAA,aAAU;IAAC;IACzD;QAAE,KAAK;QAAW,OAAO;QAAW,MAAM,8IAAA,CAAA,YAAS;IAAC;IACpD;QAAE,KAAK;QAAY,OAAO;QAAY,MAAM,8IAAA,CAAA,aAAU;IAAC;IACvD;QAAE,KAAK;QAAW,OAAO;QAAW,MAAM,8IAAA,CAAA,WAAQ;IAAC;IACnD;QAAE,KAAK;QAAU,OAAO;QAAU,MAAM,8IAAA,CAAA,WAAQ;IAAC;IACjD;QAAE,KAAK;QAAS,OAAO;QAAS,MAAM,8IAAA,CAAA,UAAO;IAAC;IAC9C;QAAE,KAAK;QAAQ,OAAO;QAAQ,MAAM,8IAAA,CAAA,SAAM;IAAC;IAC3C;QAAE,KAAK;QAAS,OAAO;QAAS,MAAM,8IAAA,CAAA,UAAO;IAAC;IAC9C;QAAE,KAAK;QAAa,OAAO;QAAa,MAAM,8IAAA,CAAA,aAAU;IAAC;IACzD;QAAE,KAAK;QAAU,OAAO;QAAU,MAAM,8IAAA,CAAA,WAAQ;IAAC;IACjD;QAAE,KAAK;QAAO,OAAO;QAAO,MAAM,8IAAA,CAAA,QAAK;IAAC;IACxC;QAAE,KAAK;QAAQ,OAAO;QAAQ,MAAM,8IAAA,CAAA,SAAM;IAAC;IAC3C;QAAE,KAAK;QAAO,OAAO;QAAO,MAAM,8IAAA,CAAA,QAAK;IAAC;IACxC;QAAE,KAAK;QAAW,OAAO;QAAW,MAAM,8IAAA,CAAA,YAAS;IAAC;IACpD;QAAE,KAAK;QAAS,OAAO;QAAS,MAAM,8IAAA,CAAA,UAAO;IAAC;IAC9C;QAAE,KAAK;QAAQ,OAAO;QAAQ,MAAM,8IAAA,CAAA,SAAM;IAAC;IAC3C;QAAE,KAAK;QAAY,OAAO;QAAY,MAAM,8IAAA,CAAA,aAAU;IAAC;IACvD;QAAE,KAAK;QAAS,OAAO;QAAS,MAAM,8IAAA,CAAA,UAAO;IAAC;IAC9C;QAAE,KAAK;QAAQ,OAAO;QAAQ,MAAM,8IAAA,CAAA,SAAM;IAAC;IAC3C;QAAE,KAAK;QAAQ,OAAO;QAAQ,MAAM,8IAAA,CAAA,SAAM;IAAC;IAC3C;QAAE,KAAK;QAAY,OAAO;QAAY,MAAM,8IAAA,CAAA,aAAU;IAAC;IACvD;QAAE,KAAK;QAAU,OAAO;QAAU,MAAM,8IAAA,CAAA,WAAQ;IAAC;IACjD;QAAE,KAAK;QAAS,OAAO;QAAS,MAAM,8IAAA,CAAA,gBAAa;IAAC;IACpD;QAAE,KAAK;QAAK,OAAO;QAAK,MAAM,8IAAA,CAAA,YAAS;IAAC;IACxC;QAAE,KAAK;QAAQ,OAAO;QAAQ,MAAM,8IAAA,CAAA,SAAM;IAAC;IAC3C;QAAE,KAAK;QAAS,OAAO;QAAS,MAAM,8IAAA,CAAA,UAAO;IAAC;IAC9C;QAAE,KAAK;QAAe,OAAO;QAAgB,MAAM,8IAAA,CAAA,gBAAa;IAAC;IACjE;QAAE,KAAK;QAAa,OAAO;QAAc,MAAM,8IAAA,CAAA,cAAW;IAAC;IAC3D;QAAE,KAAK;QAAe,OAAO;QAAgB,MAAM,8IAAA,CAAA,gBAAa;IAAC;IACjE;QAAE,KAAK;QAAgB,OAAO;QAAiB,MAAM,8IAAA,CAAA,iBAAc;IAAC;IACpE;QAAE,KAAK;QAAS,OAAO;QAAS,MAAM,8IAAA,CAAA,UAAO;IAAC;IAC9C;QAAE,KAAK;QAAQ,OAAO;QAAQ,MAAM,8IAAA,CAAA,SAAM;IAAC;IAC3C;QAAE,KAAK;QAAY,OAAO;QAAa,MAAM,8IAAA,CAAA,UAAU;IAAC;IACxD;QAAE,KAAK;QAAQ,OAAO;QAAQ,MAAM,8IAAA,CAAA,SAAM;IAAC;CAC5C","debugId":null}},
    {"offset": {"line": 2041, "column": 0}, "map": {"version":3,"sources":["file:///Users/Josip/Documents/dnd-notes-app/components/notes/CategoryDropdown.tsx"],"sourcesContent":["import { useState, useRef, useEffect } from 'react'\nimport { NoteCategory } from '@/lib/database.types'\nimport { ICON_MAP } from '@/lib/icons';\nimport React from 'react';\n\ninterface CategoryDropdownProps {\n  categories: NoteCategory[]\n  value: string | null\n  onChange: (categoryId: string | null) => void\n  placeholder?: string\n}\n\nfunction getFolderIcon(icon: string) {\n  const ICONS: Record<string, string> = {\n    general: 'ðŸ“',\n    npc: 'ðŸ§™â€â™‚ï¸',\n    location: 'ðŸ°',\n    quest: 'âš”ï¸',\n    session: 'ðŸŽ²',\n    item: 'âš¡',\n    lore: 'ðŸ“š',\n    pantheon: 'ðŸ›',\n  }\n  return ICONS[icon] || 'ðŸ“'\n}\n\nexport default function CategoryDropdown({ categories, value, onChange, placeholder = 'Select a category...' }: CategoryDropdownProps) {\n  const [open, setOpen] = useState(false)\n  const [search, setSearch] = useState('')\n  const containerRef = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    function handleClick(e: MouseEvent) {\n      if (containerRef.current && !containerRef.current.contains(e.target as Node)) {\n        setOpen(false)\n      }\n    }\n    if (open) document.addEventListener('mousedown', handleClick)\n    return () => document.removeEventListener('mousedown', handleClick)\n  }, [open])\n\n  const filteredCategories = categories.filter(c =>\n    c.name.toLowerCase().includes(search.toLowerCase())\n  )\n\n  const selected = categories.find(c => c.id === value)\n\n  return (\n    <div className=\"relative\" ref={containerRef}>\n      <button\n        type=\"button\"\n        className=\"w-full flex items-center justify-between px-3 py-2 bg-slate-700/50 border border-slate-600 rounded text-white focus:ring-2 focus:ring-blue-500\"\n        onClick={() => setOpen(o => !o)}\n      >\n        <span className=\"inline-flex items-center gap-2\">\n          <span className=\"text-xl\">\n            {selected && selected.icon && ICON_MAP[selected.icon]\n              ? React.createElement(ICON_MAP[selected.icon])\n              : 'ðŸ“‚'}\n          </span>\n          <span>{selected ? selected.name : placeholder}</span>\n        </span>\n        <svg className=\"w-4 h-4 ml-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n        </svg>\n      </button>\n      {open && (\n        <div className=\"absolute z-50 mt-2 w-full bg-slate-800 border border-slate-700 rounded-lg shadow-xl max-h-64 overflow-y-auto animate-fade-in\">\n          <div className=\"p-2\">\n            <input\n              type=\"text\"\n              value={search}\n              onChange={e => setSearch(e.target.value)}\n              placeholder=\"Search categories...\"\n              className=\"w-full p-2 bg-slate-700/50 border border-slate-600 rounded focus:ring-2 focus:ring-blue-500 text-white placeholder-slate-400 mb-2\"\n              autoFocus\n            />\n          </div>\n          <div className=\"max-h-40 overflow-y-auto custom-scrollbar\">\n            <div className=\"flex flex-col gap-1\">\n              <div\n                className={`flex items-center px-3 py-2 cursor-pointer rounded transition-colors ${value === null ? 'bg-blue-600/30 text-blue-300' : 'hover:bg-slate-700/50 text-slate-200'}`}\n                onClick={() => { onChange(null); setOpen(false) }}\n              >\n                <span className=\"mr-2 text-xl\">ðŸ“‚</span>\n                <span className=\"truncate\">No Category (Unsorted)</span>\n              </div>\n              {filteredCategories.map(category => (\n                <div\n                  key={category.id}\n                  className={`flex items-center px-3 py-2 cursor-pointer rounded transition-colors ${value === category.id ? 'bg-blue-600/30 text-blue-300' : 'hover:bg-slate-700/50 text-slate-200'}`}\n                  onClick={() => { onChange(category.id); setOpen(false) }}\n                >\n                  <span className=\"mr-2 text-xl\">\n                    {category.icon && ICON_MAP[category.icon]\n                      ? React.createElement(ICON_MAP[category.icon])\n                      : 'ðŸ“'}\n                  </span>\n                  <span className=\"truncate\">{category.name}</span>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2255, "column": 0}, "map": {"version":3,"sources":["file:///Users/Josip/Documents/dnd-notes-app/components/notes/NoteForm.tsx"],"sourcesContent":["// components/notes/NoteForm.tsx - Final working version with images\n\n'use client'\n\nimport { useState, useRef, useEffect } from 'react'\nimport { Note, NoteImage, NoteCategory } from '@/lib/database.types'\nimport { insertLinkAtCursor } from '@/lib/noteLinks'\nimport NoteLinkHelper from './NoteLinkHelper'\nimport ImageUpload from '../images/ImageUpload'\nimport ImageGallery from '../images/ImageGallery'\nimport { getNoteImages } from '@/lib/images'\nimport RichTextEditor from './RichTextEditor'\nimport CategoryDropdown from './CategoryDropdown'\nimport { ICON_OPTIONS } from '@/lib/icons';\n\ninterface NoteFormProps {\n  onSubmit: (noteData: {\n    title: string\n    content: string\n    tags: string[]\n    category_id: string | null\n  }) => Promise<void>\n  onCancel: () => void\n  initialData?: Partial<Note>\n  isLoading?: boolean\n  allNotes: Note[]\n  categories: NoteCategory[]\n  defaultCategoryId?: string | null\n}\n\nexport default function NoteForm({ \n  onSubmit, \n  onCancel, \n  initialData, \n  isLoading, \n  allNotes, \n  categories,\n  defaultCategoryId\n}: NoteFormProps) {\n  const [title, setTitle] = useState(initialData?.title || '')\n  const [content, setContent] = useState(initialData?.content || '')\n  const [tagsInput, setTagsInput] = useState(initialData?.tags?.join(', ') || '')\n  const [showLinkHelper, setShowLinkHelper] = useState(false)\n  const [images, setImages] = useState<NoteImage[]>([])\n  const [loadingImages, setLoadingImages] = useState(false)\n  const [categoryId, setCategoryId] = useState<string | null>(\n    initialData?.category_id ?? defaultCategoryId ?? null\n  )\n  \n  const textareaRef = useRef<HTMLTextAreaElement>(null)\n\n  useEffect(() => {\n    if (initialData?.id) {\n      loadImages()\n    }\n  }, [initialData?.id])\n\n  const loadImages = async () => {\n    if (!initialData?.id) return\n    \n    setLoadingImages(true)\n    try {\n      const noteImages = await getNoteImages(initialData.id)\n      setImages(noteImages)\n    } catch (error) {\n      console.error('Error loading images:', error)\n      setImages([])\n    } finally {\n      setLoadingImages(false)\n    }\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    const tags = tagsInput\n      .split(',')\n      .map(tag => tag.trim())\n      .filter(tag => tag.length > 0)\n\n    await onSubmit({\n      title,\n      content,\n      tags,\n      category_id: categoryId,\n    })\n  }\n\n  const handleInsertLink = (noteTitle: string, displayText?: string) => {\n    if (textareaRef.current) {\n      const cursorPosition = textareaRef.current.selectionStart\n      const { newContent, newCursorPosition } = insertLinkAtCursor(\n        content,\n        cursorPosition,\n        noteTitle,\n        displayText\n      )\n      \n      setContent(newContent)\n      \n      // Set cursor position after link insertion\n      setTimeout(() => {\n        if (textareaRef.current) {\n          textareaRef.current.setSelectionRange(newCursorPosition, newCursorPosition)\n          textareaRef.current.focus()\n        }\n      }, 0)\n    }\n  }\n\n  function getFolderIcon(icon: string) {\n    const ICONS: Record<string, string> = {\n      general: 'ðŸ“',\n      npc: 'ðŸ§™â€â™‚ï¸',\n      location: 'ðŸ°',\n      quest: 'âš”ï¸',\n      session: 'ðŸŽ²',\n      item: 'âš¡',\n      lore: 'ðŸ“š',\n      pantheon: 'ðŸ›',\n    }\n    return ICONS[icon] || 'ðŸ“'\n  }\n\n  return (\n    <div className=\"bg-slate-800/90 backdrop-blur-sm rounded-xl shadow-2xl p-8 border border-slate-700\">\n      <h2 className=\"text-2xl font-bold mb-8 text-white\">\n        {initialData ? 'Edit Note' : 'Create New Note'}\n      </h2>\n\n      <form onSubmit={handleSubmit} className=\"space-y-8\">\n        {/* Title */}\n        <div>\n          <label className=\"block text-sm font-medium mb-3 text-slate-300\">Title</label>\n          <input\n            type=\"text\"\n            value={title}\n            onChange={(e) => setTitle(e.target.value)}\n            className=\"w-full p-4 bg-slate-700/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-white placeholder-slate-400 transition-all duration-200\"\n            placeholder=\"Enter note title...\"\n            required\n          />\n        </div>\n\n        {/* Category Selection */}\n        <div>\n          <label className=\"block text-sm font-medium mb-3 text-slate-300\">Category</label>\n          <CategoryDropdown\n            categories={categories}\n            value={categoryId}\n            onChange={setCategoryId}\n            placeholder=\"No Category (Unsorted)\"\n          />\n        </div>\n\n        {/* Icon Picker (disabled, icon is set by category) */}\n        {/*\n        <div>\n          <label className=\"block text-sm font-medium mb-3 text-slate-300\">Icon</label>\n          <div className=\"grid grid-cols-6 gap-2\">\n            {ICON_OPTIONS.map(opt => (\n              <button\n                key={opt.key}\n                type=\"button\"\n                className={`flex flex-col items-center justify-center p-2 rounded border transition-all duration-200 ${icon === opt.key ? 'border-blue-500 bg-blue-500/20 text-blue-400' : 'border-slate-600 bg-slate-700/30 text-slate-300 hover:border-slate-500 hover:bg-slate-700/50'}`}\n                onClick={() => setIcon(opt.key)}\n                tabIndex={0}\n              >\n                <opt.icon className=\"text-xl mb-1\" />\n                <span className=\"text-xs\">{opt.label}</span>\n              </button>\n            ))}\n          </div>\n        </div>\n        */}\n\n        {/* Content */}\n        <div>\n          <div className=\"flex justify-between items-center mb-3\">\n            <label className=\"text-sm font-medium text-slate-300\">Content</label>\n            <button\n              type=\"button\"\n              onClick={() => setShowLinkHelper(true)}\n              className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 flex items-center space-x-2\"\n            >\n              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\" />\n              </svg>\n              <span>Add Link</span>\n            </button>\n          </div>\n          \n          <RichTextEditor\n            value={content}\n            onChange={setContent}\n            placeholder=\"Write your note content... Use [[Note Title]] to link to other notes.\"\n            disabled={isLoading}\n          />\n          \n          <div className=\"mt-2 text-xs text-slate-400 space-y-1\">\n            <p>ðŸ’¡ <strong>Tip:</strong> Use [[Note Title]] to link to other notes</p>\n            <p>ðŸ“ <strong>Custom text:</strong> [[Note Title|Custom Display Text]]</p>\n          </div>\n        </div>\n\n        {/* Tags */}\n        <div>\n          <label className=\"block text-sm font-medium mb-3 text-slate-300\">Tags</label>\n          <input\n            type=\"text\"\n            value={tagsInput}\n            onChange={(e) => setTagsInput(e.target.value)}\n            className=\"w-full p-4 bg-slate-700/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-white placeholder-slate-400 transition-all duration-200\"\n            placeholder=\"Enter tags separated by commas (e.g. dragon, combat, important)\"\n          />\n          <p className=\"text-xs text-slate-400 mt-2\">\n            Separate multiple tags with commas\n          </p>\n        </div>\n\n        {/* Images - Only show for existing notes */}\n        {initialData?.id && (\n          <div className=\"space-y-4\">\n            <label className=\"block text-sm font-medium text-slate-300\">\n              Images {loadingImages && <span className=\"text-xs text-slate-400\">(Loading...)</span>}\n            </label>\n            \n            {/* Existing Images */}\n            {images.length > 0 && (\n              <div className=\"mb-4\">\n                <ImageGallery \n                  images={images}\n                  onImageDeleted={loadImages}\n                  canEdit={true}\n                  compact={true}\n                />\n              </div>\n            )}\n            \n            {/* Upload New Images */}\n            <ImageUpload \n              noteId={initialData.id}\n              onImageUploaded={loadImages}\n              disabled={isLoading}\n            />\n          </div>\n        )}\n\n        {/* Message for new notes */}\n        {!initialData?.id && (\n          <div className=\"p-4 bg-blue-500/20 border border-blue-500/30 rounded-lg\">\n            <p className=\"text-sm text-blue-400\">\n              ðŸ’¡ <strong>Tip:</strong> Create the note first, then you can add images when editing it.\n            </p>\n          </div>\n        )}\n\n        {/* Buttons */}\n        <div className=\"flex space-x-4 pt-4\">\n          <button\n            type=\"submit\"\n            disabled={isLoading || !title.trim() || !categoryId}\n            className=\"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white p-4 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:transform-none\"\n          >\n            {isLoading ? 'Saving...' : (initialData ? 'Update Note' : 'Create Note')}\n          </button>\n          <button\n            type=\"button\"\n            onClick={onCancel}\n            className=\"flex-1 bg-slate-600 hover:bg-slate-500 text-white p-4 rounded-lg font-medium transition-all duration-200\"\n          >\n            Cancel\n          </button>\n        </div>\n      </form>\n\n      {/* Note Link Helper Modal */}\n      <NoteLinkHelper\n        isOpen={showLinkHelper}\n        notes={allNotes.filter(note => note.id !== initialData?.id)} // Exclude current note\n        onInsertLink={handleInsertLink}\n        onClose={() => setShowLinkHelper(false)}\n      />\n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2700, "column": 0}, "map": {"version":3,"sources":["file:///Users/Josip/Documents/dnd-notes-app/components/notes/NotesList.tsx"],"sourcesContent":["'use client'\n\nimport { Note } from 'lib/database.types'\nimport { formatDistanceToNow } from 'date-fns'\nimport { renderContentWithLinks } from 'lib/noteLinks'\nimport { ICON_MAP } from '@/lib/icons';\nimport React from 'react';\n\ninterface NotesListProps {\n  notes: Note[]\n  allNotes: Note[]\n  onSelectNote: (note: Note) => void\n  onEditNote: (note: Note) => void\n  onDeleteNote: (note: Note) => void\n  onCreateNote: () => void\n  searchQuery?: string\n  isFiltered?: boolean\n}\n\nexport default function NotesList({ \n  notes, \n  allNotes, \n  onSelectNote, \n  onEditNote, \n  onDeleteNote, \n  onCreateNote,\n  searchQuery,\n  isFiltered \n}: NotesListProps) {\n  const highlightText = (text: string, query: string) => {\n    if (!query.trim()) return text\n    \n    const regex = new RegExp(`(${query.trim()})`, 'gi')\n    const parts = text.split(regex)\n    \n    return parts.map((part, index) =>\n      regex.test(part) ? (\n        <mark key={index} className=\"bg-yellow-400/30 text-yellow-300 rounded px-1\">\n          {part}\n        </mark>\n      ) : (\n        part\n      )\n    )\n  }\n\n  function stripHtmlTags(html: string) {\n    // Remove all HTML tags\n    return html.replace(/<[^>]+>/g, '')\n  }\n\n  const renderPreviewContent = (content: string | null, note: Note) => {\n    if (!content) return 'No content'\n    // Remove HTML tags\n    const plain = stripHtmlTags(content)\n    // Get first 150 characters for preview\n    const preview = plain.slice(0, 150)\n    const truncated = plain.length > 150 ? preview + '...' : preview\n    // If there's a search query, highlight it in the raw text\n    if (searchQuery) {\n      return highlightText(truncated, searchQuery)\n    }\n    // If there are links in the content, render them properly\n    if (truncated.includes('[[')) {\n      const linkElements = renderContentWithLinks(\n        truncated, \n        allNotes, \n        (linkedNote) => onSelectNote(linkedNote)\n      )\n      return (\n        <span className=\"inline-flex flex-wrap items-baseline gap-0\">\n          {linkElements}\n        </span>\n      )\n    }\n    return truncated\n  }\n\n  return (\n    <div className=\"bg-slate-800/90 backdrop-blur-sm rounded-xl shadow-2xl border border-slate-700\">\n      <div className=\"p-6 border-b border-slate-700 flex justify-between items-center\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-white\">Your Campaign Notes</h2>\n          {isFiltered && (\n            <p className=\"text-slate-400 text-sm mt-1\">\n              Showing {notes.length} of {allNotes.length} notes\n              {searchQuery && ` for \"${searchQuery}\"`}\n            </p>\n          )}\n        </div>\n        <button\n          onClick={onCreateNote}\n          className=\"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6 py-3 rounded-lg font-medium flex items-center space-x-2 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105\"\n        >\n          <span className=\"text-lg\">+</span>\n          <span>New Note</span>\n        </button>\n      </div>\n\n      <div className=\"divide-y divide-slate-700\">\n        {notes.length === 0 ? (\n          <div className=\"p-12 text-center text-slate-400\">\n            {allNotes.length === 0 ? (\n              <>\n                <div className=\"text-6xl mb-6\">ðŸ“</div>\n                <h3 className=\"text-xl font-medium mb-3 text-slate-300\">No notes yet</h3>\n                <p className=\"text-slate-400\">Create your first note to start building your campaign!</p>\n              </>\n            ) : (\n              <>\n                <div className=\"text-6xl mb-6\">ðŸ”</div>\n                <h3 className=\"text-xl font-medium mb-3 text-slate-300\">No notes found</h3>\n                <p className=\"text-slate-400\">\n                  {searchQuery \n                    ? `No notes match \"${searchQuery}\". Try different keywords.`\n                    : \"No notes match your current filters. Try adjusting your selection.\"\n                  }\n                </p>\n              </>\n            )}\n          </div>\n        ) : (\n          notes.map((note) => (\n            <div\n              key={note.id}\n              className=\"p-6 hover:bg-slate-700/50 transition-all duration-200 group\"\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1 cursor-pointer\" onClick={() => onSelectNote(note)}>\n                  <div className=\"flex items-center space-x-3 mb-2\">\n                    <span className=\"inline-flex items-center gap-2 text-2xl\">\n                      {note.category && note.category.icon && ICON_MAP[note.category.icon]\n                        ? React.createElement(ICON_MAP[note.category.icon])\n                        : 'ðŸ“˜'}\n                    </span>\n                    <h3 className=\"font-semibold text-white text-lg truncate\">\n                      {searchQuery ? highlightText(note.title, searchQuery) : note.title}\n                    </h3>\n                    <span className=\"text-xs px-3 py-1 rounded-full bg-green-500/20 text-green-400 border border-green-500/30 font-medium\">\n                      owner\n                    </span>\n                  </div>\n                  <div className=\"text-slate-300 mb-3 ml-11 line-clamp-2\">\n                    {renderPreviewContent(note.content, note)}\n                  </div>\n                  <div className=\"flex items-center space-x-6 text-sm text-slate-400 ml-11\">\n                    <span className=\"flex items-center space-x-1\">\n                      <span>ðŸ•’</span>\n                      <span>{formatDistanceToNow(new Date(note.updated_at), { addSuffix: true })}</span>\n                    </span>\n                    {note.tags && note.tags.length > 0 && (\n                      <div className=\"flex space-x-2\">\n                        {note.tags.slice(0, 3).map((tag, index) => (\n                          <span\n                            key={index}\n                            className=\"bg-slate-600/50 text-slate-300 px-3 py-1 rounded-full text-xs border border-slate-600\"\n                          >\n                            {searchQuery ? highlightText(tag, searchQuery) : tag}\n                          </span>\n                        ))}\n                        {note.tags.length > 3 && (\n                          <span className=\"text-slate-500\">+{note.tags.length - 3} more</span>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                </div>\n                \n                {/* Action Buttons */}\n                <div className=\"flex items-center space-x-2 ml-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200\">\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation()\n                      onEditNote(note)\n                    }}\n                    className=\"p-2 text-slate-400 hover:text-blue-400 hover:bg-blue-500/20 rounded-lg transition-colors duration-200\"\n                    title=\"Edit note\"\n                  >\n                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n                    </svg>\n                  </button>\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation()\n                      onDeleteNote(note)\n                    }}\n                    className=\"p-2 text-slate-400 hover:text-red-400 hover:bg-red-500/20 rounded-lg transition-colors duration-200\"\n                    title=\"Delete note\"\n                  >\n                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                    </svg>\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3109, "column": 0}, "map": {"version":3,"sources":["file:///Users/Josip/Documents/dnd-notes-app/components/notes/SearchAndFilter.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { Note } from '@/lib/database.types'\nimport { NoteCategory } from '@/lib/database.types'\nimport { ICON_MAP } from '@/lib/icons';\nimport React from 'react';\n\ninterface SearchAndFilterProps {\n  onSearch: (query: string) => void\n  onFilterCategory: (category: string | 'all') => void\n  onFilterTag: (tag: string) => void\n  searchQuery: string\n  selectedCategory: string | 'all'\n  availableTags: string[]\n  selectedTag: string\n  categories: NoteCategory[]\n}\n\n// Remove NOTE_TYPES and all type-related logic\n// Add category filter using categories prop\n// Update handlers and UI to use category/category_id\n\nexport default function SearchAndFilter({\n  onSearch,\n  onFilterCategory,\n  onFilterTag,\n  searchQuery,\n  selectedCategory,\n  availableTags = [], // Default to empty array\n  selectedTag,\n  categories = [],\n}: SearchAndFilterProps) {\n  const [showFilters, setShowFilters] = useState(false)\n\n  return (\n    <div className=\"bg-slate-800/90 backdrop-blur-sm rounded-xl shadow-2xl border border-slate-700 p-6 mb-6\">\n      {/* Search Bar */}\n      <div className=\"relative mb-4\">\n        <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\n          <svg className=\"h-5 w-5 text-slate-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n          </svg>\n        </div>\n        <input\n          type=\"text\"\n          value={searchQuery}\n          onChange={(e) => onSearch(e.target.value)}\n          placeholder=\"Search your campaign notes...\"\n          className=\"w-full pl-12 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-white placeholder-slate-400 transition-all duration-200\"\n        />\n      </div>\n\n      {/* Filter Toggle */}\n      <div className=\"flex justify-between items-center\">\n        <button\n          onClick={() => setShowFilters(!showFilters)}\n          className=\"flex items-center space-x-2 text-slate-300 hover:text-white transition-colors duration-200\"\n        >\n          <svg className={`w-4 h-4 transition-transform duration-200 ${showFilters ? 'rotate-180' : ''}`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n          </svg>\n          <span>Filters</span>\n        </button>\n\n        {/* Active Filters Count */}\n        {(selectedCategory !== 'all' || selectedTag !== 'all') && (\n          <div className=\"flex items-center space-x-2\">\n            <span className=\"text-xs bg-blue-500/20 text-blue-400 px-2 py-1 rounded-full border border-blue-500/30\">\n              {selectedCategory !== 'all' && selectedTag !== 'all' ? '2 filters active' :\n               selectedCategory !== 'all' ? 'Category filter' : 'Tag filter'}\n            </span>\n            <button\n              onClick={() => {\n                onFilterCategory('all')\n                onFilterTag('all')\n              }}\n              className=\"text-xs text-slate-400 hover:text-slate-300 underline\"\n            >\n              Clear all\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Filter Options */}\n      {showFilters && (\n        <div className=\"mt-6 space-y-6 border-t border-slate-700 pt-6\">\n          {/* Category Filter */}\n          <div>\n            <h3 className=\"text-sm font-medium text-slate-300 mb-3\">Filter by Category</h3>\n            <div className=\"flex flex-wrap gap-2\">\n              <button\n                onClick={() => onFilterCategory('all')}\n                className={`px-3 py-2 text-sm rounded-lg transition-all duration-200 flex items-center space-x-2 ${\n                  selectedCategory === 'all'\n                    ? 'bg-blue-500/20 text-blue-400 border border-blue-500/30'\n                    : 'bg-slate-700/50 text-slate-300 border border-slate-600 hover:border-slate-500'\n                }`}\n              >\n                <span>ðŸ”</span>\n                <span>All Categories</span>\n              </button>\n              {categories.map((cat) => (\n                <button\n                  key={cat.id}\n                  onClick={() => onFilterCategory(cat.id)}\n                  className={`px-3 py-2 text-sm rounded-lg transition-all duration-200 flex items-center space-x-2 ${\n                    selectedCategory === cat.id\n                      ? 'bg-blue-500/20 text-blue-400 border border-blue-500/30'\n                      : 'bg-slate-700/50 text-slate-300 border border-slate-600 hover:border-slate-500'\n                  }`}\n                >\n                  <span className=\"text-xl\">\n                    {cat.icon && ICON_MAP[cat.icon]\n                      ? React.createElement(ICON_MAP[cat.icon])\n                      : 'ðŸ“'}\n                  </span>\n                  <span>{cat.name}</span>\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Tag Filter */}\n          {availableTags && availableTags.length > 0 && (\n            <div>\n              <h3 className=\"text-sm font-medium text-slate-300 mb-3\">Filter by Tag</h3>\n              <div className=\"flex flex-wrap gap-2\">\n                <button\n                  onClick={() => onFilterTag('all')}\n                  className={`px-3 py-2 text-sm rounded-lg transition-all duration-200 ${\n                    selectedTag === 'all'\n                      ? 'bg-blue-500/20 text-blue-400 border border-blue-500/30'\n                      : 'bg-slate-700/50 text-slate-300 border border-slate-600 hover:border-slate-500'\n                  }`}\n                >\n                  All Tags\n                </button>\n                {availableTags.map((tag) => (\n                  <button\n                    key={tag}\n                    onClick={() => onFilterTag(tag)}\n                    className={`px-3 py-2 text-sm rounded-lg transition-all duration-200 ${\n                      selectedTag === tag\n                        ? 'bg-blue-500/20 text-blue-400 border border-blue-500/30'\n                        : 'bg-slate-700/50 text-slate-300 border border-slate-600 hover:border-slate-500'\n                    }`}\n                  >\n                    {tag}\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3386, "column": 0}, "map": {"version":3,"sources":["file:///Users/Josip/Documents/dnd-notes-app/components/notes/DeleteConfirmModal.tsx"],"sourcesContent":["'use client'\n\ninterface DeleteConfirmModalProps {\n  isOpen: boolean\n  noteTitle: string\n  onConfirm: () => void\n  onCancel: () => void\n  isDeleting: boolean\n}\n\nexport default function DeleteConfirmModal({ \n  isOpen, \n  noteTitle, \n  onConfirm, \n  onCancel, \n  isDeleting \n}: DeleteConfirmModalProps) {\n  if (!isOpen) return null\n\n  return (\n    <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-slate-800 rounded-xl border border-slate-700 p-6 max-w-md w-full shadow-2xl\">\n        <div className=\"flex items-center space-x-3 mb-4\">\n          <div className=\"text-3xl\">âš ï¸</div>\n          <h3 className=\"text-xl font-bold text-white\">Delete Note: 'noteTitle'</h3>\n        </div>\n        \n        <p className=\"text-slate-300 mb-2\">\n          Are you sure you want to delete this note?\n        </p>\n        \n        <p className=\"text-slate-400 text-sm mb-6 bg-slate-700/50 p-3 rounded border-l-4 border-red-500\">\n          <strong className=\"text-slate-200\">\"{noteTitle}\"</strong><br />\n          This action cannot be undone.\n        </p>\n        \n        <div className=\"flex space-x-3\">\n          <button\n            onClick={onCancel}\n            disabled={isDeleting}\n            className=\"flex-1 bg-slate-600 hover:bg-slate-500 text-white p-3 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={onConfirm}\n            disabled={isDeleting}\n            className=\"flex-1 bg-red-600 hover:bg-red-700 text-white p-3 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50\"\n          >\n            {isDeleting ? 'Deleting...' : 'Delete Note'}\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":";;;;AAAA;;AAUe,SAAS,mBAAmB,EACzC,MAAM,EACN,SAAS,EACT,SAAS,EACT,QAAQ,EACR,UAAU,EACc;IACxB,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;sCAAW;;;;;;sCAC1B,8OAAC;4BAAG,WAAU;sCAA+B;;;;;;;;;;;;8BAG/C,8OAAC;oBAAE,WAAU;8BAAsB;;;;;;8BAInC,8OAAC;oBAAE,WAAU;;sCACX,8OAAC;4BAAO,WAAU;;gCAAiB;gCAAE;gCAAU;;;;;;;sCAAU,8OAAC;;;;;wBAAK;;;;;;;8BAIjE,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,SAAS;4BACT,UAAU;4BACV,WAAU;sCACX;;;;;;sCAGD,8OAAC;4BACC,SAAS;4BACT,UAAU;4BACV,WAAU;sCAET,aAAa,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;AAM1C","debugId":null}},
    {"offset": {"line": 3506, "column": 0}, "map": {"version":3,"sources":["file:///Users/Josip/Documents/dnd-notes-app/components/notes/NoteContentRenderer.tsx"],"sourcesContent":["'use client'\n\nimport { Note } from '@/lib/database.types'\nimport { renderContentWithLinks } from '@/lib/noteLinks'\n\ninterface NoteContentRendererProps {\n  content: string\n  notes: Note[]\n  onNoteClick: (note: Note) => void\n}\n\nexport default function NoteContentRenderer({ \n  content, \n  notes, \n  onNoteClick \n}: NoteContentRendererProps) {\n  if (!content) {\n    return <div className=\"text-slate-400 italic\">No content</div>\n  }\n\n  // Render content as plain text with clickable links, no <p> or <div> wrappers\n  const renderLines = (text: string) => {\n    return text.split(/\\r?\\n/).map((line, index) => {\n      if (line.trim() === '') return <br key={index} />\n      const renderedContent = renderContentWithLinks(line, notes, onNoteClick)\n      return <span key={index}>{renderedContent}<br /></span>\n    })\n  }\n\n  return (\n    <span className=\"text-slate-200\">\n      {renderLines(content)}\n    </span>\n  )\n}"],"names":[],"mappings":";;;;AAGA;AAHA;;;AAWe,SAAS,oBAAoB,EAC1C,OAAO,EACP,KAAK,EACL,WAAW,EACc;IACzB,IAAI,CAAC,SAAS;QACZ,qBAAO,8OAAC;YAAI,WAAU;sBAAwB;;;;;;IAChD;IAEA,8EAA8E;IAC9E,MAAM,cAAc,CAAC;QACnB,OAAO,KAAK,KAAK,CAAC,SAAS,GAAG,CAAC,CAAC,MAAM;YACpC,IAAI,KAAK,IAAI,OAAO,IAAI,qBAAO,8OAAC,UAAQ;;;;;YACxC,MAAM,kBAAkB,CAAA,GAAA,gHAAA,CAAA,yBAAsB,AAAD,EAAE,MAAM,OAAO;YAC5D,qBAAO,8OAAC;;oBAAkB;kCAAgB,8OAAC;;;;;;eAAzB;;;;;QACpB;IACF;IAEA,qBACE,8OAAC;QAAK,WAAU;kBACb,YAAY;;;;;;AAGnB","debugId":null}},
    {"offset": {"line": 3565, "column": 0}, "map": {"version":3,"sources":["file:///Users/Josip/Documents/dnd-notes-app/components/notes/CategorySidebar.tsx"],"sourcesContent":["import React from 'react';\nimport { Note, NoteCategory } from '@/lib/database.types';\nimport { FaPlus } from 'react-icons/fa';\nimport { ICON_MAP } from '@/lib/icons';\n\nfunction getCategoryIcon(icon: string | undefined | null) {\n  const IconComponent = (icon && ICON_MAP[icon]) || ICON_MAP.fallback;\n  return <IconComponent />;\n}\n\ninterface CategorySidebarProps {\n  categories: NoteCategory[];\n  notes: Note[];\n  selectedCategoryId?: string;\n  onSelectCategory: (categoryId: string | undefined) => void;\n  onSelectNote: (note: Note) => void;\n  headerAction?: () => void;\n}\n\nconst CategorySidebar: React.FC<CategorySidebarProps> = ({\n  categories,\n  notes,\n  selectedCategoryId,\n  onSelectCategory,\n  onSelectNote,\n  headerAction,\n}) => {\n  // Notes in selected category\n  const notesInCategory = selectedCategoryId\n    ? notes.filter(n => n.category_id === selectedCategoryId)\n    : notes;\n\n  return (\n    <aside className=\"w-full md:w-72 bg-slate-800/90 border-r border-slate-700 h-full flex flex-col overflow-y-auto rounded-xl\">\n      <div className=\"p-4 border-b border-slate-700 flex items-center justify-between\">\n        <span className=\"text-lg font-bold text-white\">Categories</span>\n        {headerAction && (\n          <button\n            className=\"p-2 text-slate-400 hover:text-blue-400 rounded-full hover:bg-slate-700/50 transition-colors\"\n            onClick={headerAction}\n            title=\"New Category\"\n          >\n            <FaPlus />\n          </button>\n        )}\n      </div>\n      <nav className=\"flex-1 p-2 space-y-1\">\n        <button\n          className={`w-full flex items-center px-2 py-2 mb-2 rounded-lg font-medium transition-colors ${selectedCategoryId == null ? 'bg-blue-600/30 text-blue-300' : 'hover:bg-slate-700/50 text-slate-200'}`}\n          onClick={() => onSelectCategory(undefined)}\n        >\n          <span className=\"mr-2 text-xl\">ðŸ“‚</span>\n          <span className=\"truncate\">All Categories</span>\n        </button>\n        {categories.map(category => (\n          <div\n            key={category.id}\n            className={`flex items-center px-2 py-2 rounded-lg cursor-pointer transition-colors ${selectedCategoryId === category.id ? 'bg-blue-600/30 text-blue-300' : 'hover:bg-slate-700/50 text-slate-200'}`}\n            onClick={() => onSelectCategory(category.id)}\n          >\n            <span className=\"mr-2 text-xl\">{getCategoryIcon(category.icon)}</span>\n            <span className=\"truncate\">{category.name}</span>\n          </div>\n        ))}\n      </nav>\n    </aside>\n  );\n}\n\nexport default CategorySidebar; "],"names":[],"mappings":";;;;AAEA;AACA;;;;AAEA,SAAS,gBAAgB,IAA+B;IACtD,MAAM,gBAAgB,AAAC,QAAQ,4GAAA,CAAA,WAAQ,CAAC,KAAK,IAAK,4GAAA,CAAA,WAAQ,CAAC,QAAQ;IACnE,qBAAO,8OAAC;;;;;AACV;AAWA,MAAM,kBAAkD,CAAC,EACvD,UAAU,EACV,KAAK,EACL,kBAAkB,EAClB,gBAAgB,EAChB,YAAY,EACZ,YAAY,EACb;IACC,6BAA6B;IAC7B,MAAM,kBAAkB,qBACpB,MAAM,MAAM,CAAC,CAAA,IAAK,EAAE,WAAW,KAAK,sBACpC;IAEJ,qBACE,8OAAC;QAAM,WAAU;;0BACf,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAK,WAAU;kCAA+B;;;;;;oBAC9C,8BACC,8OAAC;wBACC,WAAU;wBACV,SAAS;wBACT,OAAM;kCAEN,cAAA,8OAAC,8IAAA,CAAA,SAAM;;;;;;;;;;;;;;;;0BAIb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,WAAW,CAAC,iFAAiF,EAAE,sBAAsB,OAAO,iCAAiC,wCAAwC;wBACrM,SAAS,IAAM,iBAAiB;;0CAEhC,8OAAC;gCAAK,WAAU;0CAAe;;;;;;0CAC/B,8OAAC;gCAAK,WAAU;0CAAW;;;;;;;;;;;;oBAE5B,WAAW,GAAG,CAAC,CAAA,yBACd,8OAAC;4BAEC,WAAW,CAAC,wEAAwE,EAAE,uBAAuB,SAAS,EAAE,GAAG,iCAAiC,wCAAwC;4BACpM,SAAS,IAAM,iBAAiB,SAAS,EAAE;;8CAE3C,8OAAC;oCAAK,WAAU;8CAAgB,gBAAgB,SAAS,IAAI;;;;;;8CAC7D,8OAAC;oCAAK,WAAU;8CAAY,SAAS,IAAI;;;;;;;2BALpC,SAAS,EAAE;;;;;;;;;;;;;;;;;AAW5B;uCAEe","debugId":null}},
    {"offset": {"line": 3694, "column": 0}, "map": {"version":3,"sources":["file:///Users/Josip/Documents/dnd-notes-app/components/notes/CategoryCreateModal.tsx"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { ICON_OPTIONS } from '@/lib/icons';\n\nexport default function CategoryCreateModal({ isOpen, onClose, onCreate, loading }: {\n  isOpen: boolean\n  onClose: () => void\n  onCreate: (name: string, icon: string) => void\n  loading?: boolean\n}) {\n  const [name, setName] = useState('')\n  const [icon, setIcon] = useState(ICON_OPTIONS[0].key)\n\n  useEffect(() => {\n    if (isOpen) {\n      setName('')\n      setIcon(ICON_OPTIONS[0].key)\n    }\n  }, [isOpen])\n\n  if (!isOpen) return null\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\n      <div className=\"bg-slate-800 rounded-lg shadow-xl p-8 w-full max-w-md border border-slate-700\">\n        <h2 className=\"text-xl font-bold mb-4 text-white\">Create Category</h2>\n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium text-slate-300 mb-2\">Name</label>\n          <input\n            type=\"text\"\n            value={name}\n            onChange={e => setName(e.target.value)}\n            className=\"w-full p-2 rounded bg-slate-700 border border-slate-600 text-white focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Category name\"\n            disabled={loading}\n          />\n        </div>\n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium text-slate-300 mb-2\">Icon</label>\n          <div className=\"grid grid-cols-6 gap-2\">\n            {ICON_OPTIONS.map(opt => (\n              <button\n                key={opt.key}\n                type=\"button\"\n                className={`flex flex-col items-center justify-center p-2 rounded border transition-all duration-200 ${icon === opt.key ? 'border-blue-500 bg-blue-500/20 text-blue-400' : 'border-slate-600 bg-slate-700/30 text-slate-300 hover:border-slate-500 hover:bg-slate-700/50'}`}\n                onClick={() => setIcon(opt.key)}\n                disabled={loading}\n                tabIndex={0}\n              >\n                <opt.icon className=\"text-xl mb-1\" />\n                <span className=\"text-xs\">{opt.label}</span>\n              </button>\n            ))}\n          </div>\n        </div>\n        <div className=\"flex justify-end gap-2 mt-6\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 rounded bg-slate-600 text-white hover:bg-slate-700 transition-colors\"\n            disabled={loading}\n          >\n            Cancel\n          </button>\n          <button\n            onClick={() => onCreate(name, icon)}\n            className=\"px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 transition-colors font-semibold\"\n            disabled={loading || !name}\n          >\n            Create\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n} "],"names":[],"mappings":";;;;AAAA;AACA;;;;AAEe,SAAS,oBAAoB,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,OAAO,EAK/E;IACC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,4GAAA,CAAA,eAAY,CAAC,EAAE,CAAC,GAAG;IAEpD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,QAAQ;YACV,QAAQ;YACR,QAAQ,4GAAA,CAAA,eAAY,CAAC,EAAE,CAAC,GAAG;QAC7B;IACF,GAAG;QAAC;KAAO;IAEX,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAAoC;;;;;;8BAClD,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAM,WAAU;sCAAgD;;;;;;sCACjE,8OAAC;4BACC,MAAK;4BACL,OAAO;4BACP,UAAU,CAAA,IAAK,QAAQ,EAAE,MAAM,CAAC,KAAK;4BACrC,WAAU;4BACV,aAAY;4BACZ,UAAU;;;;;;;;;;;;8BAGd,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAM,WAAU;sCAAgD;;;;;;sCACjE,8OAAC;4BAAI,WAAU;sCACZ,4GAAA,CAAA,eAAY,CAAC,GAAG,CAAC,CAAA,oBAChB,8OAAC;oCAEC,MAAK;oCACL,WAAW,CAAC,yFAAyF,EAAE,SAAS,IAAI,GAAG,GAAG,iDAAiD,gGAAgG;oCAC3Q,SAAS,IAAM,QAAQ,IAAI,GAAG;oCAC9B,UAAU;oCACV,UAAU;;sDAEV,8OAAC,IAAI,IAAI;4CAAC,WAAU;;;;;;sDACpB,8OAAC;4CAAK,WAAU;sDAAW,IAAI,KAAK;;;;;;;mCAR/B,IAAI,GAAG;;;;;;;;;;;;;;;;8BAapB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,SAAS;4BACT,WAAU;4BACV,UAAU;sCACX;;;;;;sCAGD,8OAAC;4BACC,SAAS,IAAM,SAAS,MAAM;4BAC9B,WAAU;4BACV,UAAU,WAAW,CAAC;sCACvB;;;;;;;;;;;;;;;;;;;;;;;AAOX","debugId":null}},
    {"offset": {"line": 3856, "column": 0}, "map": {"version":3,"sources":["file:///Users/Josip/Documents/dnd-notes-app/src/app/page.tsx"],"sourcesContent":["// src/app/page.tsx - Complete file with image support\n\n'use client'\n\nimport { useEffect, useState, useMemo, useRef } from 'react'\nimport { User } from '@supabase/supabase-js'\nimport { supabase } from 'lib/supabase'\nimport { Note } from 'lib/database.types'\nimport { \n  createNote, \n  getNotes, \n  updateNote, \n  deleteNote,\n  getNoteCategories,\n  createNoteCategory\n} from 'lib/notes'\nimport { searchAndFilterNotes, getAvailableTags, SearchFilters } from 'lib/search'\nimport LoginForm from 'components/auth/LoginForm'\nimport NoteForm from 'components/notes/NoteForm'\nimport NotesList from 'components/notes/NotesList'\nimport SearchAndFilter from 'components/notes/SearchAndFilter'\nimport DeleteConfirmModal from 'components/notes/DeleteConfirmModal'\nimport NoteContentRenderer from 'components/notes/NoteContentRenderer'\nimport ImageGallery from 'components/images/ImageGallery'\nimport { getNoteImages } from 'lib/images'\nimport { NoteImage } from 'lib/database.types'\nimport CategorySidebar from 'components/notes/CategorySidebar'\nimport { NoteCategory } from 'lib/database.types'\nimport CategoryCreateModal from 'components/notes/CategoryCreateModal'\nimport { ICON_MAP } from 'lib/icons';\nimport React from 'react';\n\nexport default function Home() {\n  const [user, setUser] = useState<User | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [allNotes, setAllNotes] = useState<Note[]>([])\n  const [selectedNote, setSelectedNote] = useState<Note | null>(null)\n  const [editingNote, setEditingNote] = useState<Note | null>(null)\n  const [showCreateForm, setShowCreateForm] = useState(false)\n  const [isCreating, setIsCreating] = useState(false)\n  const [isUpdating, setIsUpdating] = useState(false)\n  const [showDeleteModal, setShowDeleteModal] = useState(false)\n  const [noteToDelete, setNoteToDelete] = useState<Note | null>(null)\n  const [isDeleting, setIsDeleting] = useState(false)\n  const [selectedNoteImages, setSelectedNoteImages] = useState<NoteImage[]>([])\n  const [categories, setCategories] = useState<NoteCategory[]>([])\n  const [selectedCategoryId, setSelectedCategoryId] = useState<string | undefined>(undefined)\n  const [showCategoryModal, setShowCategoryModal] = useState(false)\n  const [isCreatingCategory, setIsCreatingCategory] = useState(false)\n  const [profileOpen, setProfileOpen] = useState(false);\n  // Replace profileButtonRef with profileRef for the header div\n  const profileRef = useRef<HTMLDivElement>(null);\n  const [mobileSidebarOpen, setMobileSidebarOpen] = useState(false);\n\n  // Search and filter state\n  const [searchFilters, setSearchFilters] = useState({\n    query: '',\n    category: 'all',\n    tag: 'all'\n  })\n\n  // Computed values with safe defaults\n  const filteredNotes = useMemo(() => {\n    if (!allNotes || allNotes.length === 0) return []\n    return searchAndFilterNotes(allNotes, searchFilters)\n  }, [allNotes, searchFilters])\n\n  const availableTags = useMemo(() => {\n    if (!allNotes || allNotes.length === 0) return []\n    return getAvailableTags(allNotes)\n  }, [allNotes])\n\n  const isFiltered = searchFilters.query !== '' || searchFilters.category !== 'all' || searchFilters.tag !== 'all'\n\n  // Filter notes by selected category\n  const notesInSelectedCategory = useMemo(() => {\n    if (!selectedCategoryId) return filteredNotes\n    return filteredNotes.filter(note => note.category_id === selectedCategoryId)\n  }, [filteredNotes, selectedCategoryId])\n\n  useEffect(() => {\n    const checkUser = async () => {\n      const { data: { session } } = await supabase.auth.getSession()\n      setUser(session?.user ?? null)\n      setLoading(false)\n    }\n\n    checkUser()\n\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\n      (_event, session) => {\n        console.log('onAuthStateChange fired:', _event, session);\n        setUser(session?.user ?? null)\n      }\n    )\n\n    return () => subscription.unsubscribe()\n  }, [])\n\n  useEffect(() => {\n    if (user) {\n      loadNotes()\n      loadCategories()\n    }\n  }, [user])\n\n  useEffect(() => {\n    if (selectedNote) {\n      loadSelectedNoteImages()\n    } else {\n      setSelectedNoteImages([])\n    }\n  }, [selectedNote])\n\n  useEffect(() => {\n    function handleClick(e: MouseEvent) {\n      if (profileRef.current && !profileRef.current.contains(e.target as Node)) {\n        setProfileOpen(false);\n      }\n    }\n    if (profileOpen) document.addEventListener('mousedown', handleClick);\n    return () => document.removeEventListener('mousedown', handleClick);\n  }, [profileOpen]);\n\n  const loadNotes = async () => {\n    try {\n      const notesData = await getNotes()\n      setAllNotes(notesData || [])\n    } catch (error) {\n      console.error('Error loading notes:', error)\n      setAllNotes([])\n    }\n  }\n\n  const NOTE_CATEGORIES = [\n    { key: 'general', name: 'General', icon: 'general' },\n    { key: 'npc', name: 'NPCs', icon: 'npc' },\n    { key: 'location', name: 'Locations', icon: 'location' },\n    { key: 'quest', name: 'Quests', icon: 'quest' },\n    { key: 'session', name: 'Sessions', icon: 'session' },\n    { key: 'item', name: 'Items', icon: 'item' },\n    { key: 'lore', name: 'Lore', icon: 'lore' },\n    { key: 'pantheon', name: 'Pantheon', icon: 'pantheon' },\n  ]\n\n  const loadCategories = async () => {\n    try {\n      const categoryData = await getNoteCategories()\n      setCategories(categoryData)\n    } catch (error) {\n      console.error('Error loading categories:', error)\n      setCategories([])\n    }\n  }\n\n  const loadSelectedNoteImages = async () => {\n    if (selectedNote) {\n      const images = await getNoteImages(selectedNote.id)\n      setSelectedNoteImages(images)\n    }\n  }\n\n  const handleSelectNote = (note: Note) => {\n    setSelectedNote(note)\n  }\n\n  const handleNavigateToNote = (note: Note) => {\n    setSelectedNote(note)\n  }\n\n  const handleCreateNote = async (noteData: {\n    title: string\n    content: string\n    tags: string[]\n    category_id: string | null\n  }) => {\n    setIsCreating(true)\n    try {\n      await createNote(noteData)\n      await loadNotes()\n      setShowCreateForm(false)\n    } catch (error) {\n      console.error('Error creating note:', error)\n      alert('Failed to create note. Please try again.')\n    } finally {\n      setIsCreating(false)\n    }\n  }\n\n  const handleEditNote = (note: Note) => {\n    setEditingNote(note)\n    setSelectedNote(null)\n    setShowCreateForm(false)\n  }\n\n  const handleUpdateNote = async (noteData: {\n    title: string\n    content: string\n    tags: string[]\n    category_id: string | null\n  }) => {\n    if (!editingNote) return\n\n    setIsUpdating(true)\n    try {\n      await updateNote(editingNote.id, noteData)\n      await loadNotes()\n      setEditingNote(null)\n    } catch (error) {\n      console.error('Error updating note:', error)\n      alert('Failed to update note. Please try again.')\n    } finally {\n      setIsUpdating(false)\n    }\n  }\n\n  const handleDeleteNote = (note: Note) => {\n    setNoteToDelete(note)\n    setShowDeleteModal(true)\n  }\n\n  const confirmDeleteNote = async () => {\n    if (!noteToDelete) return\n\n    setIsDeleting(true)\n    try {\n      await deleteNote(noteToDelete.id)\n      await loadNotes()\n      setShowDeleteModal(false)\n      setNoteToDelete(null)\n      if (selectedNote?.id === noteToDelete.id) {\n        setSelectedNote(null)\n      }\n    } catch (error) {\n      console.error('Error deleting note:', error)\n      alert('Failed to delete note. Please try again.')\n    } finally {\n      setIsDeleting(false)\n    }\n  }\n\n  const handleSearch = (query: string) => {\n    setSearchFilters(prev => ({ ...prev, query }))\n  }\n\n  const handleFilterCategory = (category: string | 'all') => {\n    setSearchFilters(prev => ({ ...prev, category }))\n  }\n\n  const handleFilterTag = (tag: string) => {\n    setSearchFilters(prev => ({ ...prev, tag }))\n  }\n\n  const handleLogout = async () => {\n    try {\n      const sessionBefore = await supabase.auth.getSession();\n      console.log('Before signOut, session:', sessionBefore);\n      const { error } = await supabase.auth.signOut();\n      const sessionAfter = await supabase.auth.getSession();\n      console.log('After signOut, session:', sessionAfter);\n      if (error) {\n        alert('Logout failed: ' + error.message);\n        console.error('Supabase signOut error:', error);\n      } else {\n        console.log('User logged out successfully');\n        window.location.reload();\n      }\n    } catch (err) {\n      alert('Logout failed: ' + (err instanceof Error ? err.message : String(err)));\n      console.error('Logout exception:', err);\n    }\n  }\n\n  // CategorySidebar handlers\n  const handleSelectCategory = (categoryId: string | undefined) => {\n    setSelectedCategoryId(categoryId)\n    setSelectedNote(null)\n    setEditingNote(null)\n    setShowCreateForm(false)\n  }\n  const handleCreateCategory = async (name: string, icon: string) => {\n    setIsCreatingCategory(true)\n    try {\n      await createNoteCategory({ name, icon })\n      setShowCategoryModal(false)\n      await loadCategories()\n    } catch (error) {\n      alert('Failed to create category. Please try again.')\n    } finally {\n      setIsCreatingCategory(false)\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900\">\n        <div className=\"text-white\">Loading...</div>\n      </div>\n    )\n  }\n\n  if (!user) {\n    return <LoginForm />\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900\">\n      {/* Header */}\n      <div className=\"bg-slate-800/90 border-b border-slate-700 shadow-xl z-[9998]\">\n        <div className=\"max-w-6xl mx-auto px-4 py-6 z-0\">\n          <div className=\"flex justify-between items-center relative z-[9998]\">\n            <h1 className=\"text-3xl font-bold text-white\">ðŸŽ² Arcane Archives</h1>\n            <div className=\"flex items-center space-x-4 relative\" ref={profileRef}>\n              {/* Mobile: single menu button */}\n              <button\n                className=\"block md:hidden text-2xl text-slate-300 hover:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-full transition-colors\"\n                onClick={() => setMobileSidebarOpen(true)}\n                aria-label=\"Open menu\"\n              >\n                {ICON_MAP.menu && <ICON_MAP.menu />}\n              </button>\n              {/* Desktop: profile button */}\n              <button\n                className=\"hidden md:flex text-2xl text-slate-300 items-center hover:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-full transition-colors\"\n                onClick={() => setProfileOpen((o) => !o)}\n                aria-label=\"Open profile menu\"\n              >\n                {ICON_MAP.user && <ICON_MAP.user />}\n              </button>\n              {profileOpen && (\n                <div className=\"absolute right-0 top-full mt-2 w-64 bg-slate-800 border border-slate-700 rounded-xl shadow-2xl z-[9999] animate-fade-in p-4 flex flex-col items-center min-w-[220px]\">\n                  <div className=\"w-full flex flex-col items-center mb-4\">\n                    <div className=\"bg-slate-700 text-slate-300 rounded-full p-3 mb-2 flex items-center justify-center\">\n                      {ICON_MAP.user && React.createElement(ICON_MAP.user as any, { size: 32 })}\n                    </div>\n                    <span className=\"text-base font-semibold text-white mb-1\">Profile</span>\n                    <span className=\"text-xs text-slate-400 mb-1\">{user.email}</span>\n                    {user.id && (\n                      <span className=\"text-xs text-slate-500 break-all\">ID: {user.id}</span>\n                    )}\n                  </div>\n                  <div className=\"w-full border-t border-slate-700 my-2\" />\n                  <button\n                    onClick={async () => { \n                      console.log('Logout button clicked');\n                      await handleLogout(); \n                      setProfileOpen(false); \n                    }}\n                    className=\"w-full bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-red-400\"\n                  >\n                    Logout\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content with Sidebar */}\n      <div className=\"max-w-6xl mx-auto px-4 py-8 flex gap-6 z-0\">\n        {/* Category Sidebar */}\n        <div className=\"hidden md:block w-72 flex-shrink-0 z-0\">\n          <CategorySidebar\n            categories={categories}\n            notes={allNotes}\n            selectedCategoryId={selectedCategoryId}\n            onSelectCategory={handleSelectCategory}\n            onSelectNote={handleSelectNote}\n            headerAction={() => setShowCategoryModal(true)}\n          />\n        </div>\n        {/* Mobile Slide-over Sidebar (now includes profile) */}\n        {mobileSidebarOpen && (\n          <>\n            <div\n              className=\"fixed inset-0 bg-black/50 z-[9998] transition-opacity md:hidden\"\n              onClick={() => setMobileSidebarOpen(false)}\n              aria-label=\"Close menu overlay\"\n            />\n            <aside className=\"fixed inset-y-0 left-0 w-80 max-w-full bg-slate-800/90 border-r border-slate-700 z-[9999] shadow-2xl flex flex-col md:hidden animate-slide-in\">\n              <div className=\"flex flex-col items-center p-6 border-b border-slate-700\">\n                <div className=\"bg-slate-700 text-slate-300 rounded-full p-3 mb-2 flex items-center justify-center\">\n                  {ICON_MAP.user && React.createElement(ICON_MAP.user as any, { size: 40 })}\n                </div>\n                <span className=\"text-base font-semibold text-white mb-1\">Profile</span>\n                <span className=\"text-xs text-slate-400 mb-1\">{user.email}</span>\n                {user.id && (\n                  <span className=\"text-xs text-slate-500 break-all mb-2\">ID: {user.id}</span>\n                )}\n                <button\n                  onClick={async () => { \n                    console.log('Logout button clicked');\n                    await handleLogout(); \n                    setMobileSidebarOpen(false); \n                  }}\n                  className=\"w-full bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-red-400 mt-2\"\n                >\n                  Logout\n                </button>\n                <button\n                  className=\"absolute top-4 right-4 text-slate-400 hover:text-blue-400 rounded-full hover:bg-slate-700/50 transition-colors p-2\"\n                  onClick={() => setMobileSidebarOpen(false)}\n                  aria-label=\"Close menu\"\n                >\n                  {ICON_MAP.x && <ICON_MAP.x />}\n                </button>\n              </div>\n              <div className=\"flex-1 overflow-y-auto\">\n                <CategorySidebar\n                  categories={categories}\n                  notes={allNotes}\n                  selectedCategoryId={selectedCategoryId}\n                  onSelectCategory={(id) => { setMobileSidebarOpen(false); handleSelectCategory(id); }}\n                  onSelectNote={handleSelectNote}\n                  headerAction={() => { setShowCategoryModal(true); setMobileSidebarOpen(false); }}\n                />\n              </div>\n            </aside>\n          </>\n        )}\n        {/* Main Area */}\n        <div className=\"flex-1 min-w-0 z-0\">\n          {showCreateForm ? (\n            <NoteForm\n              onSubmit={handleCreateNote}\n              onCancel={() => setShowCreateForm(false)}\n              isLoading={isCreating}\n              allNotes={allNotes}\n              categories={categories}\n              defaultCategoryId={selectedCategoryId || null}\n            />\n          ) : editingNote ? (\n            <NoteForm\n              onSubmit={handleUpdateNote}\n              onCancel={() => setEditingNote(null)}\n              initialData={editingNote}\n              isLoading={isUpdating}\n              allNotes={allNotes}\n              categories={categories}\n            />\n          ) : selectedNote ? (\n            <div className=\"bg-slate-800/90 backdrop-blur-sm rounded-xl shadow-2xl p-8 border border-slate-700\">\n              <div className=\"flex justify-between items-start mb-6\">\n                <button\n                  onClick={() => setSelectedNote(null)}\n                  className=\"text-blue-400 hover:text-blue-300 font-medium transition-colors duration-200\"\n                >\n                  â† Back to notes\n                </button>\n                <div className=\"flex space-x-2\">\n                  <button\n                    onClick={() => handleEditNote(selectedNote)}\n                    className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2\"\n                  >\n                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n                    </svg>\n                    <span>Edit</span>\n                  </button>\n                  <button\n                    onClick={() => handleDeleteNote(selectedNote)}\n                    className=\"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2\"\n                  >\n                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                    </svg>\n                    <span>Delete</span>\n                  </button>\n                </div>\n              </div>\n\n              <NoteContentRenderer \n                content={selectedNote.content || ''} \n                notes={allNotes}\n                onNoteClick={handleNavigateToNote}\n              />\n\n              {/* Image Gallery */}\n              {selectedNoteImages.length > 0 && (\n                <div className=\"mt-8\">\n                  <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center space-x-2\">\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 002 2z\" />\n                    </svg>\n                    <span>Images</span>\n                  </h3>\n                  <ImageGallery \n                    images={selectedNoteImages}\n                    onImageDeleted={loadSelectedNoteImages}\n                    canEdit={true}\n                  />\n                </div>\n              )}\n            </div>\n          ) : (\n            <>\n              {/* Search and Filter */}\n              <SearchAndFilter\n                onSearch={handleSearch}\n                onFilterCategory={handleFilterCategory}\n                onFilterTag={handleFilterTag}\n                searchQuery={searchFilters.query}\n                selectedCategory={searchFilters.category}\n                availableTags={availableTags}\n                selectedTag={searchFilters.tag}\n                categories={categories}\n              />\n              {/* Notes List (filtered by folder) */}\n              <NotesList\n                notes={notesInSelectedCategory}\n                allNotes={allNotes}\n                onSelectNote={handleSelectNote}\n                onEditNote={handleEditNote}\n                onDeleteNote={handleDeleteNote}\n                onCreateNote={() => setShowCreateForm(true)}\n                searchQuery={searchFilters.query}\n                isFiltered={isFiltered}\n              />\n            </>\n          )}\n        </div>\n      </div>\n      {/* Category Create Modal */}\n      <CategoryCreateModal\n        isOpen={showCategoryModal}\n        onClose={() => setShowCategoryModal(false)}\n        onCreate={handleCreateCategory}\n        loading={isCreatingCategory}\n      />\n      {/* Delete Confirmation Modal */}\n      <DeleteConfirmModal\n        isOpen={showDeleteModal}\n        noteTitle={noteToDelete?.title || ''}\n        onConfirm={confirmDeleteNote}\n        onCancel={() => {\n          setShowDeleteModal(false)\n          setNoteToDelete(null)\n        }}\n        isDeleting={isDeleting}\n      />\n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}}]
}